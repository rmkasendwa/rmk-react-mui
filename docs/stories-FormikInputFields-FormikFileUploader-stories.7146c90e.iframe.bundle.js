"use strict";(self.webpackChunk_infinite_debugger_react_mui=self.webpackChunk_infinite_debugger_react_mui||[]).push([[5747],{"./src/stories/FormikInputFields/FormikFileUploader.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return FormikFileUploader_stories}});var _Default$parameters,_Default$parameters2,_Default$parameters2$,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),Container=__webpack_require__("./node_modules/@mui/material/esm/Container/Container.js"),Grid=__webpack_require__("./node_modules/@mui/material/esm/Grid/Grid.js"),formik_esm=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),Formik=__webpack_require__("./src/hooks/Formik.ts"),FileUploader=__webpack_require__("./src/components/FileUploader.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["name","value","onChange","error","helperText"],FormikFileUploader=(0,react.forwardRef)((function FormikFileUploader(_ref,ref){var name=_ref.name,valueProp=_ref.value,onChangeProp=_ref.onChange,errorProp=_ref.error,helperTextProp=_ref.helperText,rest=(0,objectWithoutProperties.Z)(_ref,_excluded),_useAggregatedFormikC=(0,Formik.d)({value:valueProp,name:name,error:errorProp,helperText:helperTextProp,onChange:onChangeProp}),value=_useAggregatedFormikC.value,onChange=_useAggregatedFormikC.onChange,error=_useAggregatedFormikC.error,helperText=_useAggregatedFormikC.helperText;return(0,jsx_runtime.jsx)(FileUploader.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({ref:ref},rest),{},{name:name,value:value,onChange:onChange,error:error,helperText:helperText}))}));try{FormikFileUploader.displayName="FormikFileUploader",FormikFileUploader.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"FileContainer[]"}},upload:{defaultValue:null,description:"",name:"upload",required:!1,type:{name:"FileUploadFunction"}},download:{defaultValue:null,description:"",name:"download",required:!1,type:{name:"FileDownloadFunction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormikInputFields/FormikFileUploader.tsx#FormikFileUploader"]={docgenInfo:FormikFileUploader.__docgenInfo,name:"FormikFileUploader",path:"src/components/FormikInputFields/FormikFileUploader.tsx#FormikFileUploader"})}catch(__react_docgen_typescript_loader_error){}var FormikFileUploader_stories={title:"Components/Formik Input Fields/Formik File Uploader",component:FormikFileUploader},initialValues={field:null},Default=function Template(props){return(0,jsx_runtime.jsx)(Container.Z,{maxWidth:"lg",sx:{p:3},children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:initialValues,onSubmit:function(){var _ref=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(values){return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:console.log({values:values});case 1:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),children:function children(){return(0,jsx_runtime.jsxs)(formik_esm.l0,{noValidate:!0,children:[(0,jsx_runtime.jsx)(FormikFileUploader,(0,objectSpread2.Z)({name:"field"},props)),(0,jsx_runtime.jsxs)(Grid.ZP,{container:!0,sx:{mt:2},children:[(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,xs:!0}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,children:(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",type:"submit",children:"Submit"})})]})]})}})})}.bind({});Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:'props => {\n  return <Container maxWidth="lg" sx={{\n    p: 3\n  }}>\r\n      <Formik initialValues={initialValues} onSubmit={async values => {\n      console.log({\n        values\n      });\n    }}>\r\n        {() => {\n        return <Form noValidate>\r\n              <FormikFileUploader name="field" {...props} />\r\n              <Grid container sx={{\n            mt: 2\n          }}>\r\n                <Grid item xs />\r\n                <Grid item>\r\n                  <Button variant="contained" type="submit">\r\n                    Submit\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>;\n      }}\r\n      </Formik>\r\n    </Container>;\n}'},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./src/components/FileUploader.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return components_FileUploader}});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),bytes=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/bytes.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/Close.js"),CloudDownload=__webpack_require__("./node_modules/@mui/icons-material/CloudDownload.js"),CloudUpload=__webpack_require__("./node_modules/@mui/icons-material/CloudUpload.js"),Delete=__webpack_require__("./node_modules/@mui/icons-material/Delete.js"),Refresh=__webpack_require__("./node_modules/@mui/icons-material/Refresh.js"),Card=__webpack_require__("./node_modules/@mui/material/esm/Card/Card.js"),IconButton=__webpack_require__("./node_modules/@mui/material/esm/IconButton/IconButton.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),Divider=__webpack_require__("./node_modules/@mui/material/esm/Divider/Divider.js"),FormControl=__webpack_require__("./node_modules/@mui/material/esm/FormControl/FormControl.js"),FormHelperText=__webpack_require__("./node_modules/@mui/material/esm/FormHelperText/FormHelperText.js"),Grid=__webpack_require__("./node_modules/@mui/material/esm/Grid/Grid.js"),LinearProgress=__webpack_require__("./node_modules/@mui/material/esm/LinearProgress/LinearProgress.js"),List=__webpack_require__("./node_modules/@mui/material/esm/List/List.js"),ListItem=__webpack_require__("./node_modules/@mui/material/esm/ListItem/ListItem.js"),ListItemAvatar=__webpack_require__("./node_modules/@mui/material/esm/ListItemAvatar/ListItemAvatar.js"),ListItemText=__webpack_require__("./node_modules/@mui/material/esm/ListItemText/ListItemText.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),Tooltip=__webpack_require__("./node_modules/@mui/material/esm/Tooltip/Tooltip.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),colorManipulator=__webpack_require__("./node_modules/@mui/system/colorManipulator.js"),react=__webpack_require__("./node_modules/react/index.js"),Files=__webpack_require__("./src/hooks/Files.ts"),page=__webpack_require__("./src/utils/page.ts"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),generateUtilityClass=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClass/generateUtilityClass.js"),generateUtilityClasses=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClasses/generateUtilityClasses.js"),useThemeProps=__webpack_require__("./node_modules/@mui/material/esm/styles/useThemeProps.js"),composeClasses=__webpack_require__("./node_modules/@mui/utils/esm/composeClasses/composeClasses.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),react_file_icon_esm=__webpack_require__("./node_modules/react-file-icon/dist/react-file-icon.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["className","fileName","sx"];function getFileIconUtilityClass(slot){return(0,generateUtilityClass.Z)("MuiFileIcon",slot)}(0,generateUtilityClasses.Z)("MuiFileIcon",["root"]);var slots={root:["root"]},FileIcon=(0,react.forwardRef)((function FileIcon(inProps,ref){var props=(0,useThemeProps.Z)({props:inProps,name:"MuiFileIcon"}),className=props.className,fileName=props.fileName,sx=props.sx,rest=(0,objectWithoutProperties.Z)(props,_excluded),classes=(0,composeClasses.Z)(slots,getFileIconUtilityClass,function(){if(className)return{root:className}}()),fileExtension=(0,react.useMemo)((function(){var match=/\.([a-z]+)$/gi.exec(fileName);return match?match[1]:""}),[fileName]);return(0,jsx_runtime.jsx)(Box.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({ref:ref},rest),{},{className:(0,clsx_m.Z)(classes.root),sx:(0,objectSpread2.Z)((0,objectSpread2.Z)({},sx),{},{display:"flex"}),children:(0,jsx_runtime.jsx)(react_file_icon_esm.a,(0,objectSpread2.Z)({extension:fileExtension.toUpperCase()},function(){if(fileExtension)return react_file_icon_esm.j[fileExtension]}()))}))})),components_FileIcon=FileIcon;try{getFileIconUtilityClass.displayName="getFileIconUtilityClass",getFileIconUtilityClass.__docgenInfo={description:"",displayName:"getFileIconUtilityClass",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FileIcon.tsx#getFileIconUtilityClass"]={docgenInfo:getFileIconUtilityClass.__docgenInfo,name:"getFileIconUtilityClass",path:"src/components/FileIcon.tsx#getFileIconUtilityClass"})}catch(__react_docgen_typescript_loader_error){}try{FileIcon.displayName="FileIcon",FileIcon.__docgenInfo={description:"",displayName:"FileIcon",props:{fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FileIcon.tsx#FileIcon"]={docgenInfo:FileIcon.__docgenInfo,name:"FileIcon",path:"src/components/FileIcon.tsx#FileIcon"})}catch(__react_docgen_typescript_loader_error){}var FileUploader=(0,react.forwardRef)((function FileUploader(_ref,ref){var helperText=_ref.helperText,error=_ref.error,onChange=_ref.onChange,name=_ref.name,id=_ref.id,value=_ref.value,upload=_ref.upload,download=_ref.download,palette=(0,useTheme.Z)().palette,_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),fileListContainer=_useState2[0],setFileListContainer=_useState2[1],_useState3=(0,react.useState)(null),_useState4=(0,slicedToArray.Z)(_useState3,2),fileField=_useState4[0],setFileField=_useState4[1],_useFileUpload=(0,Files.F)({fileField:fileField,upload:upload,download:download,name:name,id:id,value:value,onChange:onChange,convertFilesToBase64:!1}),files=_useFileUpload.files,setFiles=_useFileUpload.setFiles,duplicateFileSelections=_useFileUpload.duplicateFileSelections,removeFile=function removeFile(index){files.splice(index,1),setFiles((0,toConsumableArray.Z)(files))};return(0,react.useEffect)((function(){fileListContainer&&duplicateFileSelections.length>0&&(0,toConsumableArray.Z)(fileListContainer.querySelectorAll(".file-uploader-file-list-item")).filter((function(_,index){return duplicateFileSelections.includes(index)})).forEach((function(fileLIstItem){return(0,page.N)(fileLIstItem)}))}),[duplicateFileSelections,fileListContainer]),(0,jsx_runtime.jsxs)(FormControl.Z,{ref:ref,fullWidth:!0,error:error,children:[(0,jsx_runtime.jsx)("input",{type:"file",ref:function ref(fileField){setFileField(fileField)},multiple:!0,style:{display:"none"}}),(0,jsx_runtime.jsxs)(Grid.ZP,{container:!0,columnSpacing:3,children:[(0,jsx_runtime.jsxs)(Grid.ZP,{item:!0,xs:files.length<=0,sx:{width:files.length>0?320:void 0},children:[(0,jsx_runtime.jsx)(Card.Z,{sx:{bgcolor:(0,colorManipulator.Fq)(palette.text.primary,.1),cursor:"pointer",borderWidth:2,borderStyle:"dashed"},onClick:function onClick(){null==fileField||fileField.click()},children:(0,jsx_runtime.jsxs)(Box.Z,{sx:{width:"100%",minWidth:220,height:220,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,jsx_runtime.jsx)(CloudUpload.Z,{sx:{fontSize:80,display:"block",color:(0,colorManipulator.Fq)(palette.text.primary,.2)}}),(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",color:"success",sx:{mb:1},children:"Upload File"}),(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",sx:{color:(0,colorManipulator.Fq)(palette.text.primary,.2),fontWeight:"bold"},children:"20MB Maximum file size"})]})}),helperText&&(0,jsx_runtime.jsx)(FormHelperText.Z,{children:helperText})]}),files.length>0?(0,jsx_runtime.jsxs)(Grid.ZP,{item:!0,xs:!0,children:[(0,jsx_runtime.jsxs)(Grid.ZP,{container:!0,alignItems:"center",children:[(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,xs:!0,children:(0,jsx_runtime.jsxs)(Typography.Z,{sx:{fontWeight:"bold"},children:[files.length," file",1===files.length?null:"s"]})}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,children:(0,jsx_runtime.jsx)(Typography.Z,{sx:{color:palette.success.main,cursor:"pointer",fontSize:14},children:"Download All"})})]}),(0,jsx_runtime.jsx)(List.Z,{ref:function ref(fileListContainer){setFileListContainer(fileListContainer)},className:"file-uploader-file-list",sx:{width:"100%"},children:files.map((function(_ref2,index){var uploading=_ref2.uploading,uploadProgress=_ref2.uploadProgress,uploadError=_ref2.uploadError,cancelUpload=_ref2.cancelUpload,retryUpload=_ref2.retryUpload,download=_ref2.download,downloading=_ref2.downloading,downloadProgress=_ref2.downloadProgress,downloadError=_ref2.downloadError,cancelDownload=_ref2.cancelDownload,retryDownload=_ref2.retryDownload,name=_ref2.name,size=_ref2.size;return(0,jsx_runtime.jsxs)(react.Fragment,{children:[0===index?null:(0,jsx_runtime.jsx)(Divider.Z,{}),(0,jsx_runtime.jsxs)(ListItem.ZP,{className:"file-uploader-file-list-item",sx:{px:0,py:.5,"&:hover":{backgroundColor:(0,colorManipulator.Fq)(palette.primary.main,.1)},gap:2},children:[(0,jsx_runtime.jsx)(ListItemAvatar.Z,{sx:{minWidth:40},children:(0,jsx_runtime.jsx)(components_FileIcon,{fileName:name,sx:{svg:{width:40}}})}),(0,jsx_runtime.jsx)(ListItemText.Z,{primary:name,primaryTypographyProps:{noWrap:!0},secondary:(0,bytes.formatBytes)(size),secondaryTypographyProps:{sx:{fontSize:12}},sx:{flex:1,minWidth:0,wordBreak:"break-all"}}),(0,jsx_runtime.jsxs)(Box.Z,{sx:{display:"flex"},children:[!download||uploading||uploadError||downloading||downloadError?null:(0,jsx_runtime.jsx)(Tooltip.Z,{title:"Dowload",children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){return download()},children:(0,jsx_runtime.jsx)(CloudDownload.Z,{})})}),uploading||uploadError||downloading||downloadError?null:(0,jsx_runtime.jsx)(Tooltip.Z,{title:"Delete",children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){removeFile(index),cancelUpload&&cancelUpload(),cancelDownload&&cancelDownload()},children:(0,jsx_runtime.jsx)(Delete.Z,{})})}),uploadError&&retryUpload?(0,jsx_runtime.jsx)(Tooltip.Z,{title:uploadError,children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){return retryUpload()},children:(0,jsx_runtime.jsx)(Refresh.Z,{})})}):null,uploading||uploadError?(0,jsx_runtime.jsx)(Tooltip.Z,{title:"Cancel Upload",children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){removeFile(index),cancelUpload&&cancelUpload()},children:(0,jsx_runtime.jsx)(Close.Z,{})})}):null,downloadError&&retryDownload?(0,jsx_runtime.jsx)(Tooltip.Z,{title:downloadError,children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){return retryDownload()},children:(0,jsx_runtime.jsx)(Refresh.Z,{})})}):null,downloading||downloadError?(0,jsx_runtime.jsx)(Tooltip.Z,{title:"Cancel Download",children:(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){cancelDownload&&cancelDownload()},children:(0,jsx_runtime.jsx)(Close.Z,{})})}):null]})]}),uploadProgress&&(uploading||uploadError)?(0,jsx_runtime.jsx)(LinearProgress.Z,{value:uploadProgress,variant:"determinate",color:uploadError?"error":"info"}):null,downloadProgress&&(downloading||downloadError)?(0,jsx_runtime.jsx)(LinearProgress.Z,{value:downloadProgress,variant:"determinate",color:downloadError?"error":"info"}):null]},index)}))})]}):null]})]})})),components_FileUploader=FileUploader;try{FileUploader.displayName="FileUploader",FileUploader.__docgenInfo={description:"",displayName:"FileUploader",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"FileContainer[]"}},upload:{defaultValue:null,description:"",name:"upload",required:!1,type:{name:"FileUploadFunction"}},download:{defaultValue:null,description:"",name:"download",required:!1,type:{name:"FileDownloadFunction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FileUploader.tsx#FileUploader"]={docgenInfo:FileUploader.__docgenInfo,name:"FileUploader",path:"src/components/FileUploader.tsx#FileUploader"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/Files.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{F:function(){return useFileUpload}});var D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),uniqid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uniqid/index.js"),uniqid__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(uniqid__WEBPACK_IMPORTED_MODULE_1__),useFileUpload=function useFileUpload(_ref){var fileField=_ref.fileField,upload=_ref.upload,download=_ref.download,name=_ref.name,id=_ref.id,value=_ref.value,onChange=_ref.onChange,_ref$convertFilesToBa=_ref.convertFilesToBase64,convertFilesToBase64=void 0===_ref$convertFilesToBa||_ref$convertFilesToBa,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(value||[]),_useState2=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useState,2),files=_useState2[0],setFiles=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),_useState4=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useState3,2),duplicateFileSelections=_useState4[0],setDuplicateFileSelections=_useState4[1],isInitialMount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0),onChangeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(onChange),downloadRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(download),uploadRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(upload),filesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(files);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){isInitialMount.current=!1,onChangeRef.current=onChange,downloadRef.current=download,uploadRef.current=upload,filesRef.current=files}),[download,files,onChange,upload]);var getLoadableFilesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((function(files){return files.map((function(file){var loadableFile=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},file),originalFile=file.originalFile,id=file.id,extraParams=file.extraParams,upload=uploadRef.current;if(upload){var retryFileUpload=function retryFileUpload(){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref2){return _ref2.originalFile===originalFile}));return stateFile?(stateFile.uploadError="",delete stateFile.retryUpload,Object.assign(stateFile,uploadFile()),(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},uploadFile=function uploadFile(){var cancel=upload(originalFile,{onProgress:function onProgress(progress){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref3){return _ref3.originalFile===originalFile}));return stateFile?(stateFile.uploadProgress=progress,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onError:function onError(err){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref4){return _ref4.originalFile===originalFile}));return stateFile?(stateFile.uploadError=err.message,stateFile.retryUpload=retryFileUpload,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onSuccess:function onSuccess(payload){payload.id&&setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref5){return _ref5.originalFile===originalFile}));return stateFile?(stateFile.id=payload.id,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onComplete:function onComplete(){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref6){return _ref6.originalFile===originalFile}));return stateFile?(stateFile.uploading=!1,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))}}).cancel;setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref7){return _ref7.originalFile===originalFile}));return stateFile?(stateFile.uploading=!0,stateFile.cancelUpload=function(){cancel(),setFiles((function(prevFiles){return prevFiles.includes(stateFile)?(prevFiles.splice(prevFiles.indexOf(stateFile),1),(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))};loadableFile.upload=uploadFile}var download=downloadRef.current;if(download){var retryFileDownload=function retryFileDownload(){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref8){return _ref8.id===id}));return stateFile?(stateFile.downloadError="",delete stateFile.retryDownload,Object.assign(stateFile,downloadFile()),(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},downloadFile=function downloadFile(){var cancel=download({id:id,extraParams:extraParams},{onProgress:function onProgress(progress){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref9){return _ref9.id===id}));return stateFile?(stateFile.downloadProgress=progress,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onError:function onError(err){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref10){return _ref10.id===id}));return stateFile?(stateFile.downloadError=err.message,stateFile.retryDownload=retryFileDownload,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onSuccess:function onSuccess(payload){payload.id&&setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref11){return _ref11.id===id}));return stateFile?(stateFile.id=payload.id,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},onComplete:function onComplete(){setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref12){return _ref12.id===id}));return stateFile?(stateFile.downloading=!1,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))}}).cancel;setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref13){return _ref13.id===id}));return stateFile?(stateFile.downloading=!0,stateFile.cancelDownload=function(){cancel(),setFiles((function(prevFiles){var stateFile=prevFiles.find((function(_ref14){return _ref14.id===id}));return stateFile?(stateFile.downloading=!1,delete stateFile.downloadError,delete stateFile.downloadProgress,(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))},(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(prevFiles)):prevFiles}))};loadableFile.download=downloadFile}return loadableFile}))}));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(fileField){var changeEventCallback=function(){var _ref15=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee(){var _reduce,_reduce2,selectedFiles,_duplicateFileSelections,newFiles,newLoadableFiles,nextFiles;return(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(fileField.files&&fileField.files.length>0)){_context.next=11;break}return _reduce=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(fileField.files).reduce((function(accumulator,file){var existingFile=filesRef.current.find((function(_ref16){var name=_ref16.name,size=_ref16.size;return file.name===name&&file.size===size}));return existingFile?accumulator[1].push(filesRef.current.indexOf(existingFile)):accumulator[0].push(file),accumulator}),[[],[]]),_reduce2=(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_reduce,2),selectedFiles=_reduce2[0],_duplicateFileSelections=_reduce2[1],_context.next=4,Promise.all(selectedFiles.map((function(file){var name=file.name,size=file.size;return convertFilesToBase64?new Promise((function(resolve,reject){var reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(){return resolve({base64:reader.result,originalFile:file,name:name,size:size})},reader.onerror=function(error){return reject(error)}})):{originalFile:file,id:uniqid__WEBPACK_IMPORTED_MODULE_1___default()(),name:name,size:size}})));case 4:newFiles=_context.sent,fileField.value="",newLoadableFiles=getLoadableFilesRef.current(newFiles),nextFiles=[].concat((0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(filesRef.current),(0,D_sandbox_rmkasendwa_com_rmk_react_mui_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(newLoadableFiles)),setFiles(nextFiles),setDuplicateFileSelections(_duplicateFileSelections),newLoadableFiles.forEach((function(_ref17){var upload=_ref17.upload;upload&&upload()}));case 11:case"end":return _context.stop()}}),_callee)})));return function changeEventCallback(){return _ref15.apply(this,arguments)}}();return fileField.addEventListener("change",changeEventCallback),function(){fileField.removeEventListener("change",changeEventCallback)}}}),[convertFilesToBase64,fileField]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){setFiles((function(prevFiles){return value&&JSON.stringify(value.map((function(_ref18){return{id:_ref18.id,name:_ref18.name,size:_ref18.size}})))!==JSON.stringify(prevFiles.map((function(_ref19){return{id:_ref19.id,name:_ref19.name,size:_ref19.size}})))?value:prevFiles}))}),[value]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(onChangeRef.current&&!isInitialMount.current){var event=new Event("change",{bubbles:!0});Object.defineProperty(event,"target",{writable:!1,value:{id:id,name:name,value:files.map((function(_ref20){return{id:_ref20.id,base64:_ref20.base64,name:_ref20.name,size:_ref20.size,originalFile:_ref20.originalFile,extraParams:_ref20.extraParams}}))}}),onChangeRef.current(event)}}),[files,id,name]),{files:files,duplicateFileSelections:duplicateFileSelections,setFiles:setFiles}}},"./src/hooks/Formik.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{d:function(){return useAggregatedFormikContext}});var formik__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/lodash.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),useAggregatedFormikContext=function useAggregatedFormikContext(_ref){var value=_ref.value,name=_ref.name,onChangeProp=_ref.onChange,onBlurProp=_ref.onBlur,helperText=_ref.helperText,error=_ref.error,_ref2=(0,formik__WEBPACK_IMPORTED_MODULE_0__.u6)()||{},values=_ref2.values,handleBlur=_ref2.handleBlur,handleChange=_ref2.handleChange,touched=_ref2.touched,errors=_ref2.errors,onChange=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(event){onChangeProp&&onChangeProp(event),handleChange&&handleChange(event)}),[handleChange,onChangeProp]),onBlur=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(event){onBlurProp&&onBlurProp(event),handleBlur&&handleBlur(event)}),[handleBlur,onBlurProp]),_useMemo=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((function(){return name?{rootPropertyPath:name.split(".")[0],propertyPath:name}:{}}),[name]),rootPropertyPath=_useMemo.rootPropertyPath,propertyPath=_useMemo.propertyPath;return{value:null!=value?value:function(){if(values&&propertyPath&&null!=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(values,propertyPath))return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(values,propertyPath)}(),onChange:onChange,onBlur:onBlur,error:null!=error?error:function(){if(errors&&touched&&rootPropertyPath&&propertyPath&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(touched,rootPropertyPath))return Boolean((0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(errors,propertyPath))}(),helperText:null!=helperText?helperText:function(){if(errors&&touched&&rootPropertyPath&&propertyPath&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(touched,rootPropertyPath))return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.get)(errors,propertyPath)}()}}},"./src/utils/page.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{N:function(){return flickerElement}});var flickerElement=function flickerElement(element){element.classList.add("flicker"),setTimeout((function(){return element.classList.remove("flicker")}),1e3)}}}]);