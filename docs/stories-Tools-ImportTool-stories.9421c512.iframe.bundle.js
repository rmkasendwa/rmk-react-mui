"use strict";(self.webpackChunk_infinite_debugger_react_mui=self.webpackChunk_infinite_debugger_react_mui||[]).push([[9899],{"./src/stories/Tools/ImportTool.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return ImportTool_stories}});var regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectDestructuringEmpty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),react=__webpack_require__("./node_modules/react/index.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),rmk_utils_data=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/data.js"),numbers=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/numbers.js"),CloudUpload=__webpack_require__("./node_modules/@mui/icons-material/CloudUpload.js"),useTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/useTheme.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Stepper=__webpack_require__("./node_modules/@mui/material/esm/Stepper/Stepper.js"),Step=__webpack_require__("./node_modules/@mui/material/esm/Step/Step.js"),StepButton=__webpack_require__("./node_modules/@mui/material/esm/StepButton/StepButton.js"),colorManipulator=__webpack_require__("./node_modules/@mui/system/esm/colorManipulator.js"),Stack=__webpack_require__("./node_modules/@mui/material/esm/Stack/Stack.js"),Grid=__webpack_require__("./node_modules/@mui/material/esm/Grid/Grid.js"),IconLoadingScreen=__webpack_require__("./src/components/IconLoadingScreen.tsx"),generateUtilityClass=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClass/generateUtilityClass.js"),generateUtilityClasses=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClasses/generateUtilityClasses.js"),useThemeProps=__webpack_require__("./node_modules/@mui/material/esm/styles/useThemeProps.js"),composeClasses=__webpack_require__("./node_modules/@mui/utils/esm/composeClasses/composeClasses.js"),SvgIcon=__webpack_require__("./node_modules/@mui/material/esm/SvgIcon/SvgIcon.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["className"];function getImportIconUtilityClass(slot){return(0,generateUtilityClass.Z)("MuiImportIcon",slot)}(0,generateUtilityClasses.Z)("MuiImportIcon",["root"]);var slots={root:["root"]},ImportIcon=(0,react.forwardRef)((function ImportIcon(inProps,ref){var props=(0,useThemeProps.Z)({props:inProps,name:"MuiImportIcon"}),className=props.className,rest=(0,objectWithoutProperties.Z)(props,_excluded),classes=(0,composeClasses.Z)(slots,getImportIconUtilityClass,function(){if(className)return{root:className}}());return(0,jsx_runtime.jsxs)(SvgIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({ref:ref},rest),{},{className:(0,clsx_m.Z)(classes.root),viewBox:"0 0 1024 1024",children:[(0,jsx_runtime.jsx)("path",{d:"M733.397 928.471l114.925-145.925H733.397v145.925z m6 0"}),(0,jsx_runtime.jsx)("path",{d:"M781.211 98.623H196.236c-37.245 0-67.46 30.154-67.539 67.399v695.05c0.078 37.245 30.294 67.399 67.539 67.399h472.216V738.065a22.455 22.455 0 0 1 6.581-15.882 22.458 22.458 0 0 1 15.882-6.581h157.406v-549.58c-0.078-37.079-30.03-67.163-67.11-67.399zM227.387 639.965h122.332c20.48 0 34.133 13.656 34.133 34.133 0 20.48-13.653 34.137-34.133 34.137H227.387c-20.481 0-34.133-13.657-34.133-34.137 0-20.477 13.652-34.133 34.133-34.133z m250.332 191.756H227.387c-20.481 0-34.133-13.657-34.133-34.137 0-20.477 13.652-34.133 34.133-34.133h250.332c20.48 0 34.133 13.656 34.133 34.133 0 20.48-13.653 34.137-34.133 34.137z m3.71-255.821L324.167 401.614h102.399s21.175-158.734 140.64-199.695c17.067-6.825 37.547-10.239 58.028-10.239-37.547 17.067-61.442 58.028-71.68 81.918-7.557 16.422-15.723 25.614-15.723 128.016h102.403L481.429 575.9z"})]}))})),Icons_ImportIcon=ImportIcon;try{getImportIconUtilityClass.displayName="getImportIconUtilityClass",getImportIconUtilityClass.__docgenInfo={description:"",displayName:"getImportIconUtilityClass",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Icons/ImportIcon.tsx#getImportIconUtilityClass"]={docgenInfo:getImportIconUtilityClass.__docgenInfo,name:"getImportIconUtilityClass",path:"src/components/Icons/ImportIcon.tsx#getImportIconUtilityClass"})}catch(__react_docgen_typescript_loader_error){}try{ImportIcon.displayName="ImportIcon",ImportIcon.__docgenInfo={description:"",displayName:"ImportIcon",props:{classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:"The color of the component.\nIt supports both default and custom theme colors, which can be added as shown in the\n[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).\nYou can use the `htmlColor` prop to apply a color attribute to the SVG element.",name:"color",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"action"'},{value:'"disabled"'},{value:'"error"'},{value:'"primary"'},{value:'"secondary"'},{value:'"info"'},{value:'"success"'},{value:'"warning"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},shapeRendering:{defaultValue:null,description:"The shape-rendering attribute. The behavior of the different options is described on the\n[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).\nIf you are having issues with blurry icons you should investigate this prop.",name:"shapeRendering",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},titleAccess:{defaultValue:null,description:"Provides a human-readable title for the element that contains it.\nhttps://www.w3.org/TR/SVG-access/#Equivalent",name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:'Allows you to redefine what the coordinates without units mean inside an SVG element.\nFor example, if the SVG element is 500 (width) by 200 (height),\nand you pass viewBox="0 0 50 20",\nthis means that the coordinates inside the SVG will go from the top left corner (0,0)\nto bottom right (50,20) and each unit will be worth 10px.',name:"viewBox",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Icons/ImportIcon.tsx#ImportIcon"]={docgenInfo:ImportIcon.__docgenInfo,name:"ImportIcon",path:"src/components/Icons/ImportIcon.tsx#ImportIcon"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_Default$parameters2$,DataDropdownField=__webpack_require__("./src/components/InputFields/DataDropdownField.tsx"),ModalPopup=__webpack_require__("./src/components/ModalPopup.tsx"),RecordsExplorer=__webpack_require__("./src/components/RecordsExplorer/index.ts"),Utils=__webpack_require__("./src/hooks/Utils.ts"),importSteps=["Upload a file","Preview data","Map data","Import"],ALLOWED_FILE_FORMATS=["csv"],useImportTool=function useImportTool(_ref){var recordLabelPlural=_ref.recordLabelPlural,recordLabelSingular=_ref.recordLabelSingular,importFields=_ref.importFields,recordsImporter=_ref.recordsImporter,importSuccessMessage=_ref.importSuccessMessage;recordLabelPlural||(recordLabelPlural="Records"),recordLabelSingular||(recordLabelSingular=recordLabelPlural.replace(/s$/gi,""));var lowercaseRecordLabelPlural=recordLabelPlural.toLowerCase(),lowercaseRecordLabelSingular=recordLabelSingular.toLowerCase(),inputFieldRef=(0,react.useRef)(null),palette=(0,useTheme.Z)().palette,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),open=_useState2[0],setOpen=_useState2[1],_useState3=(0,react.useState)("Upload a file"),_useState4=(0,slicedToArray.Z)(_useState3,2),activeStep=_useState4[0],setActiveStep=_useState4[1],_useState5=(0,react.useState)([]),_useState6=(0,slicedToArray.Z)(_useState5,2),data=_useState6[0],setData=_useState6[1],_useState7=(0,react.useState)([]),_useState8=(0,slicedToArray.Z)(_useState7,2),dataColumns=_useState8[0],setDataColumns=_useState8[1],_useState9=(0,react.useState)({}),_useState10=(0,slicedToArray.Z)(_useState9,2),mappedFields=_useState10[0],setMappedFields=_useState10[1],_useState11=(0,react.useState)([]),_useState12=(0,slicedToArray.Z)(_useState11,2),completedSteps=_useState12[0],setCompletedSteps=_useState12[1],multipleFieldsMappedtoSameAttribute=function(){var valueCount={},multipleFieldsMappedtoSameAttribute=[];for(var key in mappedFields){var value=mappedFields[key];valueCount[value]?valueCount[value].push(key):valueCount[value]=[key]}for(var _value in valueCount){var keys=valueCount[_value];keys.length>1&&multipleFieldsMappedtoSameAttribute.push.apply(multipleFieldsMappedtoSameAttribute,(0,toConsumableArray.Z)(keys))}return multipleFieldsMappedtoSameAttribute}(),_useState13=(0,react.useState)(!1),_useState14=(0,slicedToArray.Z)(_useState13,2),isDragging=_useState14[0],setIsDragging=_useState14[1];(0,react.useEffect)((function(){if("Upload a file"===activeStep&&open){var dragOverEventCallback=function dragOverEventCallback(event){event.preventDefault(),setIsDragging(!0)},dragLeaveEventCallback=function dragLeaveEventCallback(event){event.preventDefault(),setIsDragging(!1)},dragEnterEvents=["drag","dragstart","dragenter","dragover"];dragEnterEvents.forEach((function(event){document.addEventListener(event,dragOverEventCallback)}));var dragLeaveEvents=["dragend","dragleave","drop"];return dragLeaveEvents.forEach((function(event){document.addEventListener(event,dragLeaveEventCallback)})),function(){dragEnterEvents.forEach((function(event){document.removeEventListener(event,dragOverEventCallback)})),dragLeaveEvents.forEach((function(event){document.removeEventListener(event,dragLeaveEventCallback)}))}}}),[activeStep,open]);var _useMutation=(0,Utils.Db)((function(){var mappedData=data.map((function(row){var mappedRow={};for(var key in mappedFields){mappedRow[mappedFields[key]]=row[key]}return mappedRow}));return recordsImporter(mappedData)})),importRecords=_useMutation.mutate,importingRecords=_useMutation.mutating,recordsImported=_useMutation.mutated,importationErrorMessage=_useMutation.errorMessage,resetImportation=_useMutation.reset,errorMessage=importationErrorMessage||(multipleFieldsMappedtoSameAttribute.length>0?"Multiple file fields cannot be mapped to the same attribute.":void 0),handleSelectedFile=function handleSelectedFile(file){if(file.name&&ALLOWED_FILE_FORMATS.includes(file.name.split(".").pop())){var reader=new FileReader;reader.onload=function(event){var _event$target,fileData=null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.result;if(fileData){var _data=(0,rmk_utils_data.bW)(fileData);_data.length>0&&(setActiveStep("Preview data"),setCompletedSteps([].concat((0,toConsumableArray.Z)(completedSteps),["Upload a file"])),setData(_data.map((function(row,index){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},row),{},{id:index})}))),setDataColumns(Object.keys(_data[0]).map((function(key){return{id:key,label:key}}))))}},reader.onerror=function(err){console.error(err)},reader.readAsText(file)}};return{label:"Import ".concat(recordLabelPlural),icon:(0,jsx_runtime.jsx)(Icons_ImportIcon,{}),type:"button",onClick:function onClick(){setOpen(!0)},popupElement:(0,jsx_runtime.jsx)(ModalPopup.ZP,(0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)({title:"Import"!==activeStep||importingRecords||recordsImported?"Import ".concat(recordLabelPlural):"Confirm ".concat(recordLabelPlural," Importation"),open:open,onClose:function handleClose(){setOpen(!1),setActiveStep("Upload a file"),setData([]),setDataColumns([]),setMappedFields({}),setCompletedSteps([]),resetImportation()},errorMessage:errorMessage,CardProps:{sx:(0,objectSpread2.Z)({maxHeight:"none"},function(){switch(activeStep){case"Preview data":case"Map data":return{maxWidth:960,height:"80%"}}}())},CardBodyProps:{sx:{p:0,position:"relative",display:"flex",flexDirection:"column"}},CloseActionButtonProps:{children:"Upload a file"===activeStep||recordsImported?"Close":"Cancel"}},function(){if(!importingRecords&&!recordsImported)switch(activeStep){case"Preview data":return{actionButtons:[(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",onClick:function onClick(){setActiveStep("Map data"),setCompletedSteps([].concat((0,toConsumableArray.Z)(completedSteps),["Preview data"]))},children:"Confirm your file"},0)]};case"Map data":if(Object.keys(mappedFields).length>0&&!errorMessage)return{actionButtons:[(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",onClick:function onClick(){setActiveStep("Import"),setCompletedSteps([].concat((0,toConsumableArray.Z)(completedSteps),["Map data"]))},children:"Confirm mapping"},0)]};break;case"Import":if(!errorMessage)return{actionButtons:[(0,jsx_runtime.jsxs)(Button.Z,{variant:"contained",onClick:function onClick(){importRecords()},children:["Import ",recordLabelPlural]},0)]}}}()),function(){var importedColumnCount=Object.keys(mappedFields).length;if("Map data"===activeStep&&importedColumnCount>0){var ignoredColumnCount=dataColumns.length-importedColumnCount;return{popupStatsElement:(0,jsx_runtime.jsxs)(Typography.Z,{variant:"body2",noWrap:!0,children:[(0,jsx_runtime.jsxs)("strong",{children:[importedColumnCount," column",1===importedColumnCount?"":"s"]})," ","to be imported. Ignored ",ignoredColumnCount," column",1===ignoredColumnCount?"":"s"]})}}}()),{},{showActionsToolbar:!importingRecords,sx:{alignItems:"center",justifyContent:"center"},children:importingRecords||recordsImported?(0,jsx_runtime.jsx)(IconLoadingScreen.ZP,{load:importRecords,loading:importingRecords,isLoaded:recordsImported,isLoadingMessage:"Importing ".concat(lowercaseRecordLabelPlural,"..."),isLoadedMessage:importSuccessMessage||"".concat(recordLabelPlural," imported successfully!"),Icon:Icons_ImportIcon,errorMessage:errorMessage,recordLabelPlural:recordLabelPlural,recordLabelSingular:recordLabelSingular}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Box.Z,{sx:{px:3,py:2},children:(0,jsx_runtime.jsx)(Stepper.Z,{activeStep:importSteps.indexOf(activeStep),alternativeLabel:!0,children:importSteps.map((function(label){return(0,jsx_runtime.jsx)(Step.Z,{completed:completedSteps.includes(label),children:(0,jsx_runtime.jsx)(StepButton.Z,{onClick:function onClick(){setActiveStep(label)},children:label})},label)}))})}),(0,jsx_runtime.jsx)(Box.Z,{sx:(0,objectSpread2.Z)({position:"relative",flex:1},function(){switch(activeStep){case"Upload a file":case"Map data":case"Import":return{p:3}}}()),children:function(){switch(activeStep){case"Upload a file":return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("input",{ref:inputFieldRef,type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{display:"none"},onChange:function onChange(){var _inputFieldRef$curren,_inputFieldRef$curren2,file=null===(_inputFieldRef$curren=inputFieldRef.current)||void 0===_inputFieldRef$curren||null===(_inputFieldRef$curren2=_inputFieldRef$curren.files)||void 0===_inputFieldRef$curren2?void 0:_inputFieldRef$curren2[0];file&&handleSelectedFile(file)}}),(0,jsx_runtime.jsx)(Box.Z,{onClick:function onClick(){var _inputFieldRef$curren3;null===(_inputFieldRef$curren3=inputFieldRef.current)||void 0===_inputFieldRef$curren3||_inputFieldRef$curren3.click()},onDrop:function onDrop(event){event.preventDefault(),setIsDragging(!1);var file=event.dataTransfer.files[0];file&&handleSelectedFile(file)},sx:(0,objectSpread2.Z)({border:"2px dashed ".concat(palette.divider),borderRadius:"4px",cursor:"pointer",opacity:.5,"&:hover":{opacity:1}},function(){if(isDragging)return{opacity:1,border:"2px dashed ".concat(palette.primary.main),bgcolor:(0,colorManipulator.Fq)(palette.primary.main,.1)}}()),children:(0,jsx_runtime.jsxs)(Stack.Z,{sx:{gap:1,alignItems:"center",justifyContent:"center",minHeight:"300px"},children:[(0,jsx_runtime.jsx)(CloudUpload.Z,{sx:{fontSize:80}}),isDragging?(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",sx:{fontWeight:"bold"},children:"Drop the file here"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",sx:{fontWeight:"bold"},children:"Select your file or drag and drop it here"}),(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",children:".csv, .xlsx or .txt"})]})]})})]});case"Preview data":var dataToPreview=data.slice(0,100);return(0,jsx_runtime.jsx)(RecordsExplorer.t7,{title:dataToPreview.length<data.length?"Preview first ".concat((0,numbers.o)(100)," ").concat(1===dataToPreview.length?lowercaseRecordLabelSingular:lowercaseRecordLabelPlural," of your file"):"".concat(recordLabelPlural," in your file"),recordLabelPlural:recordLabelPlural,recordLabelSingular:recordLabelSingular,data:dataToPreview,views:[{type:"List",columns:dataColumns}],elevation:0});case"Map data":return(0,jsx_runtime.jsxs)(Stack.Z,{sx:{gap:2},children:[(0,jsx_runtime.jsxs)(Grid.ZP,{container:!0,sx:{px:3},children:[(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sx:{width:220},children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:"File Field Header"})}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,xs:!0,sx:{minWidth:0},children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:"Data"})}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sx:{width:250},children:(0,jsx_runtime.jsxs)(Typography.Z,{variant:"body2",noWrap:!0,children:[recordLabelSingular," Attribute"]})})]}),dataColumns.map((function(_ref2,index){var columnId=_ref2.id,label=_ref2.label,isFieldMapped=Boolean(mappedFields[String(columnId)]);return(0,jsx_runtime.jsx)(Box.Z,{sx:{p:3,bgcolor:(0,colorManipulator.Fq)(palette.primary.main,.05),borderRadius:"4px",border:"1px solid ".concat(isFieldMapped?(0,colorManipulator.Fq)(palette.primary.main,.7):palette.divider)},children:(0,jsx_runtime.jsxs)(Grid.ZP,{container:!0,children:[(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sx:{width:220},children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:label})}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,xs:!0,sx:{minWidth:0},children:data.slice(0,3).map((function(row,index){return(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:row[columnId]},index)}))}),(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sx:{width:250},children:(0,jsx_runtime.jsx)(DataDropdownField.ZP,{options:[{label:"Do not import",value:"do_not_import"}].concat((0,toConsumableArray.Z)(importFields)),value:mappedFields[String(columnId)]||"do_not_import",onChange:function onChange(event){event.target.value&&"do_not_import"!==event.target.value?setMappedFields((function(prevMappedFields){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prevMappedFields),{},(0,defineProperty.Z)({},columnId,event.target.value))})):setMappedFields((function(prevMappedFields){return(0,lodash.omit)(prevMappedFields,columnId)}))},fullWidth:!0,InputProps:{sx:{bgcolor:palette.background.paper}},showClearButton:!1,error:multipleFieldsMappedtoSameAttribute.includes(String(columnId))})})]})},index)}))]});case"Import":return(0,jsx_runtime.jsxs)(Typography.Z,{align:"center",children:[(0,numbers.o)(data.length)," ",1===data.length?lowercaseRecordLabelSingular:lowercaseRecordLabelPlural," ","will be imported"]})}}()})]})}))}};try{useImportTool.displayName="useImportTool",useImportTool.__docgenInfo={description:"",displayName:"useImportTool",props:{importFields:{defaultValue:null,description:"",name:"importFields",required:!0,type:{name:"DropdownOption<any>[]"}},recordsImporter:{defaultValue:null,description:"",name:"recordsImporter",required:!0,type:{name:"(data: any[]) => Promise<any>"}},importSuccessMessage:{defaultValue:null,description:"",name:"importSuccessMessage",required:!1,type:{name:"ReactNode"}},recordLabelPlural:{defaultValue:{value:'"Records"'},description:'The label to be used when reporting display stats for multiple records.\n@example "Records", "Things", "People"',name:"recordLabelPlural",required:!1,type:{name:"string"}},recordLabelSingular:{defaultValue:null,description:'The label to be used when reporting display stats for a single record. If not specifies, the recordLabelPlural property will be used with any trailing \'s\' removed.\n@example "Record", "Thing", "Person"',name:"recordLabelSingular",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/Tools/ImportTool.tsx#useImportTool"]={docgenInfo:useImportTool.__docgenInfo,name:"useImportTool",path:"src/hooks/Tools/ImportTool.tsx#useImportTool"})}catch(__react_docgen_typescript_loader_error){}var ImportTool_stories_excluded=["label","icon","popupElement"],ImportTool_stories={title:"Hooks/Tools/Import Tool",component:Button.Z,parameters:{layout:"centered"}},Default=function Template(_ref){var _recordsImporter,rest=Object.assign({},((0,objectDestructuringEmpty.Z)(_ref),_ref)),_useImportTool=useImportTool((0,objectSpread2.Z)({importFields:[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"phoneNumber",label:"Phone Number"}],recordsImporter:(_recordsImporter=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(records){return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return console.log({records:records}),_context.abrupt("return",new Promise((function(resolve){setTimeout((function(){resolve(records)}),5e3)})));case 2:case"end":return _context.stop()}}),_callee)}))),function recordsImporter(_x){return _recordsImporter.apply(this,arguments)})},rest)),label=_useImportTool.label,icon=_useImportTool.icon,popupElement=_useImportTool.popupElement,toolPropsRest=(0,objectWithoutProperties.Z)(_useImportTool,ImportTool_stories_excluded);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({startIcon:icon},(0,lodash.omit)(toolPropsRest,"title","type")),{},{children:label})),popupElement]})}.bind({});Default.args={recordLabelPlural:"Contacts"},Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"({\n  ...rest\n}) => {\n  const {\n    label,\n    icon,\n    popupElement,\n    ...toolPropsRest\n  } = useImportTool({\n    importFields: [{\n      value: 'firstName',\n      label: 'First Name'\n    }, {\n      value: 'lastName',\n      label: 'Last Name'\n    }, {\n      value: 'phoneNumber',\n      label: 'Phone Number'\n    }],\n    recordsImporter: async records => {\n      console.log({\n        records\n      });\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve(records);\n        }, 5000);\n      });\n    },\n    ...rest\n  });\n  return <>\r\n      <Button startIcon={icon} {...omit(toolPropsRest, 'title', 'type')}>\r\n        {label}\r\n      </Button>\r\n      {popupElement}\r\n    </>;\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]}}]);