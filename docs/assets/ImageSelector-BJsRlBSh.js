import{j as e}from"./jsx-runtime-DoEZbXM1.js";import{c as G}from"./createSvgIcon-7wHsQNqo.js";import{C as O}from"./Close-BjwsHb0e.js";import{u as X}from"./useTheme-3fQBR54N.js";import{c as Y,a as D,e as V,g as W,f as J,h as re}from"./defaultTheme-p7chgXuo.js";import{r as o}from"./index-DyFhm7NF.js";import{u as te,f as oe}from"./page-COqIGEqn.js";import{o as se}from"./index-Bf2qc8Rt.js";import{u as K}from"./useThemeProps-Bd4KMueQ.js";import{M as ne}from"./Modal-CXhXU4--.js";import{C as U}from"./Card-DZM0fdGV.js";import{I as N}from"./IconButton-A2NwtEd5.js";import{F as ae,a as ie}from"./FormHelperText-Bu3IRHZZ.js";import{G as $}from"./Grid-DBMPafDk.js";import{A as le}from"./Avatar-Cmpc5D-G.js";import{B as q}from"./Box-Cv6nAA57.js";import{B as ce}from"./Button-UL46O9fT.js";import{T as me}from"./Typography-CgOnAQvQ.js";const ue=G([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt"),pe=G(e.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay"),de=C=>W("MuiImagePreview",C),Q={root:["root"]};J("MuiImagePreview",Object.keys(Q));const Z=o.forwardRef(function(F,L){const T=K({props:F,name:"MuiImagePreview"}),{className:v,imageSource:i,onClose:x,...k}=T,z=Y(Q,de,(()=>{if(v)return{root:v}})()),d=o.useRef(1),p=o.useRef({x:0,y:0}),[f,E]=o.useState(null),[P,l]=o.useState(!1),[c,j]=o.useState(null),{spacing:R,palette:m}=X(),I=D(m.text.primary,.3),a=o.useCallback(()=>{c&&(c.style.transform=`translate(${p.current.x}px, ${p.current.y}px) scale(${d.current})`)},[c]);return o.useEffect(()=>{i&&(E(null),l(!1))},[i]),o.useEffect(()=>{if(i){const r=new Image,u=()=>{if(!P){const{innerWidth:s,innerHeight:w}=window,{width:h,height:t}=r,n=s/w,y=h/t;d.current=(()=>{const b=y>n?(s-50)/h:(w-50)/t;return b<1?b:1})(),a()}},g=()=>u();return r.onload=()=>{u(),E(r),p.current={x:0,y:0}},r.src=i,window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}}},[i,a,P]),o.useEffect(()=>{const r=u=>{d.current=(()=>{if((u.wheelDelta??-u.detail)>0){const s=d.current+.1;return s>4?4:s}else{const s=d.current-.1;return s<.25?.25:s}})(),a(),l(!0)};return window.addEventListener("mousewheel",r),()=>{window.removeEventListener("mousewheel",r)}},[a]),o.useEffect(()=>{if(c){let r;const u=s=>{let{clientX:w,clientY:h}=s;r=t=>{const{clientX:n,clientY:y}=t,b=n-w,A=y-h,{x:B,y:S}=p.current;p.current={x:B+b,y:S+A},w=n,h=y,a()},window.addEventListener("mousemove",r)},g=()=>{window.removeEventListener("mousemove",r)};return c.addEventListener("mousedown",u),window.addEventListener("mouseup",g),()=>{c.removeEventListener("mousedown",u),window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",r)}}},[c,a]),e.jsx(ne,{...k,onClose:x,ref:se([L,r=>{r&&Object.assign(r.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"})}]),...k,className:V(z.root),children:e.jsx(e.Fragment,{children:(()=>{if(i)return e.jsxs(e.Fragment,{children:[e.jsx(U,{ref:r=>{j(r)},sx:{transform:`translate(${p.current.x}px, ${p.current.y}px) scale(${d.current})`,width:f==null?void 0:f.width,height:f==null?void 0:f.height,backgroundImage:`url(${i})`,cursor:"move"}}),e.jsx(N,{onClick:()=>{x==null||x({},"backdropClick")},sx:{bgcolor:I,"&:hover":{bgcolor:I},color:m.background.paper,position:"fixed",top:R(3),right:R(3)},children:e.jsx(O,{})})]})})()})})});Z.__docgenInfo={description:"",methods:[],displayName:"ImagePreview",props:{imageSource:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const fe=C=>W("MuiImageSelector",C),ee={root:["root"]};J("MuiImageSelector",Object.keys(ee));const ge=o.forwardRef(function(F,L){const T=K({props:F,name:"MuiImageSelector"}),{className:v,helperText:i,error:x,onChange:k,name:z,id:d,value:p,upload:f,...E}=T,P=Y(ee,fe,(()=>{if(v)return{root:v}})()),{palette:l}=X(),c=D(l.text.primary,.3),[j,R]=o.useState(null),[m,I]=o.useState(null),[a,r]=o.useState(null),{files:u,setFiles:g,duplicateFileSelections:s}=te({fileField:a,upload:f,name:z,id:d,value:p,onChange:k}),w=t=>{g(n=>(n.splice(t,1),[...n]))};o.useEffect(()=>{j&&s.length>0&&[...j.querySelectorAll(".image-selector-thumbnail")].filter((t,n)=>s.includes(n)).forEach(t=>oe(t))},[s,j]);const h={};return x&&(h.borderColor=l.error.main),e.jsxs(e.Fragment,{children:[e.jsxs(ae,{ref:L,...E,className:V(P.root),fullWidth:!0,error:x,children:[e.jsxs(U,{sx:{p:1.5,borderRadius:1,bgcolor:re(l.background.paper,.03),borderStyle:"dashed",...h},children:[e.jsx("input",{type:"file",ref:t=>{r(t)},multiple:!0,accept:".jpg,.png,.jpeg,.bmp",style:{display:"none"}}),e.jsxs($,{ref:t=>{R(t)},container:!0,spacing:1.5,children:[u.map((t,n)=>{const{base64:y,url:b,uploading:A,uploadProgress:B,uploadError:S,cancelUpload:H,retryUpload:_}=t;return e.jsx($,{item:!0,xs:4,sm:3,md:2,children:e.jsxs(U,{className:"image-selector-thumbnail",onClick:()=>I(t),sx:{borderRadius:1,position:"relative",cursor:"zoom-in"},children:[e.jsx(le,{sx:{borderRadius:1,width:"100%",height:80,bgcolor:"#fff",opacity:A||S?.3:1},src:y||b}),e.jsxs(q,{sx:{position:"absolute",right:5,top:5,display:"flex",gap:"5px"},children:[e.jsx(N,{onClick:M=>{M.stopPropagation(),w(n),H&&H()},size:"small",sx:{"&,&:hover":{bgcolor:c,color:l.background.paper}},children:e.jsx(O,{sx:{fontSize:"12px"}})}),_&&e.jsx(N,{onClick:M=>{M.stopPropagation(),_()},size:"small",sx:{"&,&:hover":{bgcolor:c,color:l.background.paper}},children:e.jsx(pe,{sx:{fontSize:"12px"}})})]}),B&&(A||S)?e.jsx(q,{sx:{position:"absolute",height:3,borderRadius:"4px",width:`${B}%`,bgcolor:S?"#D04437":"#006BFF",bottom:0}}):null]})},n)}),e.jsx($,{item:!0,xs:4,sm:3,md:2,children:e.jsxs(ce,{onClick:()=>{a==null||a.click()},sx:{borderRadius:1,width:"100%",height:"80px !important",bgcolor:l.background.paper,color:"#BABCC1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"none","&:hover":{bgcolor:l.background.paper}},children:[e.jsx(ue,{}),e.jsx(me,{variant:"body2",sx:{fontSize:12,color:"#BABCC1"},children:"Add Photos"})]})})]})]}),i&&e.jsx(ie,{children:i})]}),e.jsx(Z,{open:!!m,onClose:()=>I(null),imageSource:(m==null?void 0:m.base64)||(m==null?void 0:m.url)})]})});ge.__docgenInfo={description:"",methods:[],displayName:"ImageSelector",props:{value:{required:!1,tsType:{name:"Array",elements:[{name:"FileContainer"}],raw:"FileContainer[]"},description:""},upload:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  file: File,
  options: AsyncProcess
) => AsyncProcessController`,signature:{arguments:[{type:{name:"File"},name:"file"},{type:{name:"AsyncProcess"},name:"options"}],return:{name:"AsyncProcessController"}}},description:""}},composes:["Pick"]};export{ge as I};
