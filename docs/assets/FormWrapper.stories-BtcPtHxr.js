import{j as e}from"./jsx-runtime-DoEZbXM1.js";import{s as ue,j as ce,h as v,f as de,q as l}from"./SearchSyncToolbar-BD-kT8Me.js";import{C as pe}from"./Card-Z0GoAiPr.js";import{c as ge}from"./createSvgIcon-7wHsQNqo.js";import{c as fe,e as he,g as xe,f as ye}from"./defaultTheme-p7chgXuo.js";import{r as o}from"./index-DyFhm7NF.js";import{u as ve,L as Re}from"./LoadingContext-BtWGSAhI.js";import{u as be}from"./MessagingContext-DTYM7S8f.js";import"./APIContext-CE3_laQ6.js";import{u as qe}from"./CacheableData-CKA8kD66.js";import{E as Fe}from"./ErrorAlert-McfmoKYJ.js";import{F as je}from"./FixedHeaderContentArea-4GLGU52Z.js";import{F as Pe,a as we}from"./FormikForm-CdvWniY5.js";import{u as Ce}from"./useThemeProps-Bd4KMueQ.js";import{u as Se}from"./useTheme-3fQBR54N.js";import{u as Me}from"./dates-CvympFuk.js";import{B}from"./Box-Cv6nAA57.js";import{G as r}from"./Grid-DBMPafDk.js";import{B as E}from"./Button-UL46O9fT.js";import"./jsx-runtime-Bw5QeaCk.js";import"./omit-DeUwOvIA.js";import"./_baseGet-KAaNSt7w.js";import"./index-Bf2qc8Rt.js";import"./ReloadIconButton-B48KoK_S.js";import"./Refresh-CRz1rqFY.js";import"./Tooltip-DvI5SBDW.js";import"./Grow-CmgiTL0Y.js";import"./utils-DsEKjbah.js";import"./TransitionGroupContext-DDx4AGHL.js";import"./index-Dri-WRqF.js";import"./index-Z2fzZyFz.js";import"./useForkRef-CH5D7H94.js";import"./DefaultPropsProvider-egKEaGQO.js";import"./useSlot-By0F5cUN.js";import"./Portal-CG3BG1Jq.js";import"./IconButton-A2NwtEd5.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DE0LPmTn.js";import"./CircularProgress-D8lStaeO.js";import"./constants-DkQff0yi.js";import"./InfiniteScrollBox-lWcthrSh.js";import"./Close-BjwsHb0e.js";import"./ErrorSkeleton-BVzoEatx.js";import"./FieldLabel-DdtaNqXB.js";import"./LoadingTypography-D6ofm9jy.js";import"./Typography-CgOnAQvQ.js";import"./index-DwZPt9kI.js";import"./extendSxProp-DAcN17IG.js";import"./Formik-NGUO7WBb.js";import"./endOfMonth-DQe_4K7C.js";import"./GlobalConfigurationContext-CqlJy_iX.js";import"./DatePicker-DnCj008b.js";import"./ClickAwayListener-C4Bzfge9.js";import"./List-BTl9Ld56.js";import"./Card-DZM0fdGV.js";import"./Paper-DGLpRXPs.js";import"./Modal-CXhXU4--.js";import"./createChainedFunction-BO_9K8Jh.js";import"./String-3Y7uMP2t.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./FormHelperText-Bu3IRHZZ.js";import"./isMuiElement-CXq9i0-O.js";import"./SvgIcon-BsgOx8W1.js";import"./Alert-B-kYoUC8.js";import"./styled-DnokggUK.js";import"./PaddedContentArea-BaLc3j76.js";import"./data-qU85DSPb.js";import"./bytes-p9GZEJP6.js";import"./index-vspTgJEr.js";const Ne=ge(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),Te=s=>xe("MuiFormWrapper",s),V={root:["root"]};ye("MuiFormWrapper",Object.keys(V));const Be=(s,I)=>{const A=Ce({props:s,name:"MuiFormWrapper"}),{className:b,children:u,title:D,breadcrumbs:H,initialValues:q,validationSchema:O,onSubmit:c,tools:_,formTools:F,SubmitButtonProps:z={},CancelButtonProps:G={},cancelButtonAction:U="navigate-to-previous-page",errorMessage:$,successMessage:d,recordFinder:p,mode:Y="create",getEditableRecordInitialValues:j,onSubmitSuccess:P,onLoadRecord:w,...Q}=A,J=fe(V,Te,(()=>{if(b)return{root:b}})()),g=o.useRef(j);g.current=j;const f=o.useRef(P);f.current=P;const h=o.useRef(w);h.current=w;const{...K}=z,{...X}=G,{breakpoints:Z}=Se(),n=Me(Z.down("sm")),{showSuccessMessage:C}=be(),{load:ee,loading:x,errorMessage:S}=ve(),{load:re,loading:te,errorMessage:oe,data:a}=qe(async t=>{if(p&&Y==="edit")return p(t)},{loadOnMount:!!p,autoSync:!1});o.useEffect(()=>{a&&h.current&&h.current(a)},[a]);const{mutate:ae,mutating:y,mutated:M,errorMessage:se,reset:N}=ue(async(...t)=>{if(c)return c(...t)});o.useEffect(()=>{M&&(async()=>(d&&C(d),f.current&&await f.current(),N()))()},[M,N,C,d]);const ne=o.useMemo(()=>g.current&&a?g.current(a):{...q,...a},[a,q]),T=$||S||se;return e.jsxs(je,{title:D,breadcrumbs:H,tools:_,ref:I,...Q,className:he(J.root),BodyProps:{sx:{[`&,&>form,.${we.root}`]:{display:"flex",flexDirection:"column",minHeight:0,flex:1}}},sx:{bottom:"auto",maxHeight:"100%"},children:[T&&e.jsx(B,{sx:{mb:2},children:e.jsx(Fe,{message:T,retry:ee})}),e.jsx(Re,{value:{load:re,loading:te||x||y,errorMessage:oe||S},children:e.jsx(Pe,{validationSchema:O,initialValues:ne,onSubmit:async(t,m)=>{if(c)return ae(t,m)},enableReinitialize:!0,children:({isSubmitting:t,formHasChanges:m,...ie})=>e.jsxs(e.Fragment,{children:[e.jsx(B,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:typeof u=="function"?u({isSubmitting:t,formHasChanges:m,...ie}):u}),e.jsxs(r,{container:!0,spacing:1,sx:{py:2},children:[n?null:e.jsx(r,{item:!0,xs:!0}),e.jsx(r,{item:!0,xs:n,children:e.jsx(E,{color:"inherit",variant:"text",onClick:()=>{U==="navigate-to-previous-page"&&window.history.back()},...X,children:"Cancel"})}),(()=>{if(F)return o.Children.toArray(F).map((me,le)=>e.jsx(r,{item:!0,xs:n,children:me},le))})(),e.jsx(r,{item:!0,xs:n,children:e.jsx(E,{color:"success",variant:"contained",startIcon:e.jsx(Ne,{}),fullWidth:n,type:"submit",loading:t||y||x,disabled:t||y||x||!m,...K,children:"Save Changes"})})]})]})})})]})},R=o.forwardRef(Be);R.__docgenInfo={description:"",methods:[],displayName:"FormWrapper",props:{formTools:{required:!1,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},SubmitButtonProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ButtonProps"}],raw:"Partial<ButtonProps>"},description:""},CancelButtonProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ButtonProps"}],raw:"Partial<ButtonProps>"},description:""},cancelButtonAction:{required:!1,tsType:{name:"union",raw:"'navigate-to-previous-page' | 'none'",elements:[{name:"literal",value:"'navigate-to-previous-page'"},{name:"literal",value:"'none'"}]},description:""},errorMessage:{required:!1,tsType:{name:"string"},description:""},successMessage:{required:!1,tsType:{name:"string"},description:""},recordFinder:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: CacheableDataFinderOptions) => Promise<RecordRow>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  /**
   * Function that can be used to retrieve the request controller of the data request.
   *
   * @param controller The request controller that can be used to cancel the request.
   */
  getRequestController: (controller: RecordFinderRequestController) => void;

  /**
   * Function that can be used to retrieve stale data while the request is being made.
   */
  getStaleWhileRevalidate: GetStaleWhileRevalidateFunction<any>;
}`,signature:{properties:[{key:"getRequestController",value:{name:"signature",type:"function",raw:"(controller: RecordFinderRequestController) => void",signature:{arguments:[{type:{name:"RecordFinderRequestController"},name:"controller"}],return:{name:"void"}},required:!0},description:`Function that can be used to retrieve the request controller of the data request.

@param controller The request controller that can be used to cancel the request.`},{key:"getStaleWhileRevalidate",value:{name:"signature",type:"function",raw:"(data: Data) => void",signature:{arguments:[{type:{name:"any"},name:"data"}],return:{name:"void"}},required:!0},description:"Function that can be used to retrieve stale data while the request is being made."}]}},name:"options"}],return:{name:"Promise",elements:[{name:"RecordRow"}],raw:"Promise<RecordRow>"}}},description:""},getEditableRecordInitialValues:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: LoadedRecord) => Values",signature:{arguments:[{type:{name:"LoadedRecord"},name:"record"}],return:{name:"Values"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:"'create' | 'view' | 'edit' | 'delete'",elements:[{name:"literal",value:"'create'"},{name:"literal",value:"'view'"},{name:"literal",value:"'edit'"},{name:"literal",value:"'delete'"}]},description:""},onSubmitSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onLoadRecord:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: LoadedRecord) => void",signature:{arguments:[{type:{name:"LoadedRecord"},name:"record"}],return:{name:"void"}}},description:""}},composes:["Partial","Pick","Omit"]};const Qr={title:"Components/Form Wrapper",component:R},Ee=s=>e.jsx(R,{...s}),i=Ee.bind({});i.args={title:"Form Title",initialValues:{firstName:"",lastName:"",email:"",phoneNumber:""},validationSchema:ce({firstName:l().required("Please enter your first name"),lastName:l().required("Please enter your last name"),email:l().email("Please enter a valid email address").required("Please enter your email address"),phoneNumber:l().phoneNumber().required("Please enter your phone number")}),children:e.jsx(pe,{title:"Your details",variant:"outlined",children:e.jsxs(r,{container:!0,rowSpacing:2,columnSpacing:3,children:[e.jsx(r,{item:!0,sm:6,xs:12,children:e.jsx(v,{name:"firstName",label:"First Name",required:!0})}),e.jsx(r,{item:!0,sm:6,xs:12,children:e.jsx(v,{name:"lastName",label:"Last Name",required:!0})}),e.jsx(r,{item:!0,sm:6,xs:12,children:e.jsx(v,{name:"email",label:"Email Address",required:!0})}),e.jsx(r,{item:!0,sm:6,xs:12,children:e.jsx(de,{name:"phoneNumber",label:"Phone Number",required:!0})})]})})};var W,k,L;i.parameters={...i.parameters,docs:{...(W=i.parameters)==null?void 0:W.docs,source:{originalSource:`props => {
  return <FormWrapper {...props} />;
}`,...(L=(k=i.parameters)==null?void 0:k.docs)==null?void 0:L.source}}};const Jr=["Default"];export{i as Default,Jr as __namedExportsOrder,Qr as default};
