import{j as v}from"./jsx-runtime-DoEZbXM1.js";import"./String-3Y7uMP2t.js";import{d as N}from"./dates-CvympFuk.js";import{c as j,e as q,g as R,f as L}from"./defaultTheme-p7chgXuo.js";import{r as y}from"./index-DyFhm7NF.js";import{u as Y}from"./GlobalConfigurationContext-CqlJy_iX.js";import{L as $}from"./LoadingTypography-D6ofm9jy.js";import{T as W}from"./Tooltip-DvI5SBDW.js";import{u as z}from"./useThemeProps-Bd4KMueQ.js";import{t as M,n as S,m as H,e as U,b as A,d as G,g as E,c as _,f as C,h as X,i as T,j as P,k as b}from"./endOfMonth-DQe_4K7C.js";function w(s,r){const t=+M(s)-+M(r);return t<0?-1:t>0?1:t}function k(s){return r=>{const t=Math.trunc,i=t(r);return i===0?0:i}}function g(s,r,t){const[i,e]=S(t==null?void 0:t.in,s,r),l=(+i-+e)/H;return k()(l)}function B(s,r){return+M(s)-+M(r)}function J(s,r){const t=M(s,r==null?void 0:r.in);return+U(t,r)==+A(t,r)}function K(s,r,t){const[i,e,l]=S(t==null?void 0:t.in,s,s,r),c=w(e,l),a=Math.abs(G(e,l));if(a<1)return 0;e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-c*a);let f=w(e,l)===-c;J(i)&&a===1&&w(i,l)===1&&(f=!1);const o=c*(a-+f);return o===0?0:o}function Q(s,r,t){const i=B(s,r)/1e3;return k()(i)}function V(s,r,t){const i=_(),e=(t==null?void 0:t.locale)??i.locale??C,l=2520,c=w(s,r);if(isNaN(c))throw new RangeError("Invalid time value");const a=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:c}),[f,o]=S(t==null?void 0:t.in,...c>0?[r,s]:[s,r]),u=Q(o,f),D=(E(o)-E(f))/1e3,n=Math.round((u-D)/60);let d;if(n<2)return t!=null&&t.includeSeconds?u<5?e.formatDistance("lessThanXSeconds",5,a):u<10?e.formatDistance("lessThanXSeconds",10,a):u<20?e.formatDistance("lessThanXSeconds",20,a):u<40?e.formatDistance("halfAMinute",0,a):u<60?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",1,a):n===0?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",n,a);if(n<45)return e.formatDistance("xMinutes",n,a);if(n<90)return e.formatDistance("aboutXHours",1,a);if(n<X){const m=Math.round(n/60);return e.formatDistance("aboutXHours",m,a)}else{if(n<l)return e.formatDistance("xDays",1,a);if(n<T){const m=Math.round(n/X);return e.formatDistance("xDays",m,a)}else if(n<T*2)return d=Math.round(n/T),e.formatDistance("aboutXMonths",d,a)}if(d=K(o,f),d<12){const m=Math.round(n/T);return e.formatDistance("xMonths",m,a)}else{const m=d%12,p=Math.trunc(d/12);return m<3?e.formatDistance("aboutXYears",p,a):m<9?e.formatDistance("overXYears",p,a):e.formatDistance("almostXYears",p+1,a)}}function Z(s,r,t){var D,n;const[i,e]=S(t==null?void 0:t.in,s,r),l=_(),c=l.locale??C,a=l.weekStartsOn??((n=(D=l.locale)==null?void 0:D.options)==null?void 0:n.weekStartsOn)??0,f=P(i,e);if(isNaN(f))throw new RangeError("Invalid time value");let o;f<-6?o="other":f<-1?o="lastWeek":f<0?o="yesterday":f<1?o="today":f<2?o="tomorrow":f<7?o="nextWeek":o="other";const u=c.formatRelative(o,i,e,{locale:c,weekStartsOn:a});return b(i,u,{locale:c,weekStartsOn:a})}const ee=s=>R("MuiTimeStampDisplay",s),F={root:["root"]};L("MuiTimeStampDisplay",Object.keys(F));const te=y.forwardRef(function(r,t){const i=z({props:r,name:"MuiTimeStampDisplay"}),{timestamp:e,showTooltip:l=!0,sentenceCase:c=!1,sx:a,className:f,refreshTimeout:o=3e4,...u}=i,D=j(F,ee,(()=>{if(f)return{root:f}})()),[n,d]=y.useState(()=>N.createDateWithoutTimezoneOffset(e)),{shortDateFormat:m,dateFormat:p,timeFormat:x}=Y();y.useEffect(()=>{d(new Date(e))},[e]),y.useEffect(()=>{if(o>0&&Math.abs(g(new Date,new Date(e)))<=30){const h=setInterval(()=>{d(new Date(e)),Math.abs(g(new Date,new Date(e)))>30&&clearInterval(h)},o);return()=>{clearInterval(h)}}},[o,e]);const I=(()=>{const h=new Date;return Math.abs(g(h,n))<=6?V(n,h,{addSuffix:!0}):Math.abs(g(h,n))<=30?Z(n,h):n.getFullYear()!==h.getFullYear()?b(n,`${p} 'at' ${x}`):b(n,`${m} 'at' ${x}`)})(),O=v.jsx($,{ref:t,className:q(D.root),component:"span",variant:"inherit",...u,sx:{cursor:"default",...a},children:c?I.toSentenceCase():I});return l?v.jsx(W,{title:b(n,`EEEE ${p} 'at' ${x}`),children:O}):O});te.__docgenInfo={description:"",methods:[],displayName:"TimeStampDisplay",props:{enableLoadingState:{required:!1,tsType:{name:"boolean"},description:"Whether to enable the loading state. If `true`, the loading state will be enabled.\n\n@default true"},component:{required:!1,tsType:{name:"string"},description:"The html component tag used for the root node."},showTooltipOnOverflow:{required:!1,tsType:{name:"boolean"},description:`Whether to show the tooltip when the text overflows.

@default true`},timestamp:{required:!0,tsType:{name:"union",raw:"number | string | Date",elements:[{name:"number"},{name:"string"},{name:"Date"}]},description:""},showTooltip:{required:!1,tsType:{name:"boolean"},description:""},sentenceCase:{required:!1,tsType:{name:"boolean"},description:""},refreshTimeout:{required:!1,tsType:{name:"number"},description:""}}};export{te as T,g as d};
