import{j as e}from"./jsx-runtime-DoEZbXM1.js";import{o as vt}from"./omit-DeUwOvIA.js";import{d as yt}from"./data-qU85DSPb.js";import{s as jt,M as Lt,n as at}from"./SearchSyncToolbar-BD-kT8Me.js";import{C as It}from"./CloudUpload-BmxyXxPz.js";import{r as p}from"./index-DyFhm7NF.js";import{I as Rt,R as Mt}from"./RecordsExplorer-CBaf8vN8.js";import{g as A,f as _,e as F,c as H,j as ft,a as tt}from"./defaultTheme-p7chgXuo.js";import{u as wt}from"./useThemeProps-Bd4KMueQ.js";import{S as xt}from"./SvgIcon-BsgOx8W1.js";import{D as Nt}from"./DataDropdownField-B8WeN2um.js";import"./dates-CvympFuk.js";import"./Table-DDGQSUkQ.js";import"./PopupTool-wxjqumcq.js";import"./Tooltip-DvI5SBDW.js";import"./RegExp-IPQuO5T9.js";import"./paths-81WlYTGB.js";import"./pick-C_OPzzj8.js";import"./DatePicker-DnCj008b.js";import"./APIContext-CE3_laQ6.js";import{u as $t}from"./useTheme-3fQBR54N.js";import{B as X}from"./Box-Cv6nAA57.js";import{u as V,s as $,m as q}from"./DefaultPropsProvider-egKEaGQO.js";import{i as Pt}from"./isMuiElement-CXq9i0-O.js";import{u as st}from"./useSlot-By0F5cUN.js";import{c as ht}from"./createSvgIcon-7wHsQNqo.js";import{B as Tt}from"./ButtonBase-DE0LPmTn.js";import{D as Et}from"./List-BTl9Ld56.js";import{T}from"./Typography-CgOnAQvQ.js";import{G as z}from"./Grid-DBMPafDk.js";import{S as it}from"./ErrorAlert-McfmoKYJ.js";import{B as Y}from"./Button-UL46O9fT.js";import"./jsx-runtime-Bw5QeaCk.js";import"./_baseGet-KAaNSt7w.js";import"./bytes-p9GZEJP6.js";import"./index-Bf2qc8Rt.js";import"./ReloadIconButton-B48KoK_S.js";import"./Refresh-CRz1rqFY.js";import"./IconButton-A2NwtEd5.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./TransitionGroupContext-DDx4AGHL.js";import"./CircularProgress-D8lStaeO.js";import"./constants-DkQff0yi.js";import"./InfiniteScrollBox-lWcthrSh.js";import"./Close-BjwsHb0e.js";import"./LoadingContext-BtWGSAhI.js";import"./ErrorSkeleton-BVzoEatx.js";import"./FieldLabel-DdtaNqXB.js";import"./LoadingTypography-D6ofm9jy.js";import"./Formik-NGUO7WBb.js";import"./endOfMonth-DQe_4K7C.js";import"./GlobalConfigurationContext-CqlJy_iX.js";import"./ClickAwayListener-C4Bzfge9.js";import"./useForkRef-CH5D7H94.js";import"./utils-DsEKjbah.js";import"./index-Dri-WRqF.js";import"./index-Z2fzZyFz.js";import"./Card-DZM0fdGV.js";import"./Paper-DGLpRXPs.js";import"./Modal-CXhXU4--.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-CG3BG1Jq.js";import"./Grow-CmgiTL0Y.js";import"./String-3Y7uMP2t.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./FormHelperText-Bu3IRHZZ.js";import"./index-DwZPt9kI.js";import"./extendSxProp-DAcN17IG.js";import"./AuthContext-rdUpXt8L.js";import"./index-CrueqoMl.js";import"./___vite-browser-external_commonjs-proxy-Ctkxpam9.js";import"./MessagingContext-DTYM7S8f.js";import"./Alert-B-kYoUC8.js";import"./CacheableData-CKA8kD66.js";import"./FixedHeaderContentArea-4GLGU52Z.js";import"./PaddedContentArea-BaLc3j76.js";import"./chunk-K6CSEXPM-C6U5PsfB.js";import"./ModalForm-qYIIZsoa.js";import"./FormikForm-CdvWniY5.js";import"./index-vspTgJEr.js";import"./dark-BH45OH6B.js";import"./TimeStampDisplay-Co-HvEm_.js";import"./index-0hP6KIaD.js";import"./index-CBvWS6kU.js";import"./Chip-Di80TdUA.js";import"./RenderIfVisible-K0PdTrFE.js";import"./Link-hwVpKlsM.js";import"./Badge-CTofYUn8.js";import"./SwitchBase-B9JAKXxA.js";import"./styled-DnokggUK.js";const J=p.createContext({}),Z=p.createContext({});function Bt(t){return A("MuiStep",t)}_("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const kt=t=>{const{classes:o,orientation:r,alternativeLabel:a,completed:s}=t;return H({root:["root",r,a&&"alternativeLabel",s&&"completed"]},Bt,o)},zt=$("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,o[r.orientation],r.alternativeLabel&&o.alternativeLabel,r.completed&&o.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Dt=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStep"}),{active:s,children:l,className:m,component:u="div",completed:c,disabled:h,expanded:v=!1,index:i,last:f,...S}=a,{activeStep:L,connector:C,alternativeLabel:P,orientation:y,nonLinear:R}=p.useContext(J);let[j=!1,M=!1,w=!1]=[s,c,h];L===i?j=s!==void 0?s:!0:!R&&L>i?M=c!==void 0?c:!0:!R&&L<i&&(w=h!==void 0?h:!0);const k=p.useMemo(()=>({index:i,last:f,expanded:v,icon:i+1,active:j,completed:M,disabled:w}),[i,f,v,j,M,w]),I={...a,active:j,orientation:y,alternativeLabel:P,completed:M,disabled:w,expanded:v,component:u},E=kt(I),N=e.jsxs(zt,{as:u,className:F(E.root,m),ref:r,ownerState:I,...S,children:[C&&P&&i!==0?C:null,l]});return e.jsx(Z.Provider,{value:k,children:C&&!P&&i!==0?e.jsxs(p.Fragment,{children:[C,N]}):N})}),Ft=ht(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ut=ht(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Wt(t){return A("MuiStepIcon",t)}const et=_("MuiStepIcon",["root","active","completed","error","text"]);var lt;const At=t=>{const{classes:o,active:r,completed:a,error:s}=t;return H({root:["root",r&&"active",a&&"completed",s&&"error"],text:["text"]},Wt,o)},ot=$(xt,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,o)=>o.root})(q(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${et.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${et.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${et.error}`]:{color:(t.vars||t).palette.error.main}}))),_t=$("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,o)=>o.text})(q(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}))),Ht=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStepIcon"}),{active:s=!1,className:l,completed:m=!1,error:u=!1,icon:c,...h}=a,v={...a,active:s,completed:m,error:u},i=At(v);if(typeof c=="number"||typeof c=="string"){const f=F(l,i.root);return u?e.jsx(ot,{as:Ut,className:f,ref:r,ownerState:v,...h}):m?e.jsx(ot,{as:Ft,className:f,ref:r,ownerState:v,...h}):e.jsxs(ot,{className:f,ref:r,ownerState:v,...h,children:[lt||(lt=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(_t,{className:i.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:v,children:c})]})}return c});function Ot(t){return A("MuiStepLabel",t)}const D=_("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Vt=t=>{const{classes:o,orientation:r,active:a,completed:s,error:l,disabled:m,alternativeLabel:u}=t;return H({root:["root",r,l&&"error",m&&"disabled",u&&"alternativeLabel"],label:["label",a&&"active",s&&"completed",l&&"error",m&&"disabled",u&&"alternativeLabel"],iconContainer:["iconContainer",a&&"active",s&&"completed",l&&"error",m&&"disabled",u&&"alternativeLabel"],labelContainer:["labelContainer",u&&"alternativeLabel"]},Ot,o)},Gt=$("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,o[r.orientation]]}})({display:"flex",alignItems:"center",[`&.${D.alternativeLabel}`]:{flexDirection:"column"},[`&.${D.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Yt=$("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,o)=>o.label})(q(({theme:t})=>({...t.typography.body2,display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${D.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${D.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${D.alternativeLabel}`]:{marginTop:16},[`&.${D.error}`]:{color:(t.vars||t).palette.error.main}}))),qt=$("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,o)=>o.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${D.alternativeLabel}`]:{paddingRight:0}}),Jt=$("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,o)=>o.labelContainer})(q(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${D.alternativeLabel}`]:{textAlign:"center"}}))),bt=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStepLabel"}),{children:s,className:l,componentsProps:m={},error:u=!1,icon:c,optional:h,slots:v={},slotProps:i={},StepIconComponent:f,StepIconProps:S,...L}=a,{alternativeLabel:C,orientation:P}=p.useContext(J),{active:y,disabled:R,completed:j,icon:M}=p.useContext(Z),w=c||M;let k=f;w&&!k&&(k=Ht);const I={...a,active:y,alternativeLabel:C,completed:j,disabled:R,error:u,orientation:P},E=Vt(I),N={slots:v,slotProps:{stepIcon:S,...m,...i}},[U,W]=st("label",{elementType:Yt,externalForwardedProps:N,ownerState:I}),[K,O]=st("stepIcon",{elementType:k,externalForwardedProps:N,ownerState:I});return e.jsxs(Gt,{className:F(E.root,l),ref:r,ownerState:I,...L,children:[w||K?e.jsx(qt,{className:E.iconContainer,ownerState:I,children:e.jsx(K,{completed:j,active:y,error:u,icon:w,...O})}):null,e.jsxs(Jt,{className:E.labelContainer,ownerState:I,children:[s?e.jsx(U,{...W,className:F(E.label,W==null?void 0:W.className),children:s}):null,h]})]})});bt.muiName="StepLabel";function Kt(t){return A("MuiStepButton",t)}const pt=_("MuiStepButton",["root","horizontal","vertical","touchRipple"]),Qt=t=>{const{classes:o,orientation:r}=t;return H({root:["root",r],touchRipple:["touchRipple"]},Kt,o)},Xt=$(Tt,{name:"MuiStepButton",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[{[`& .${pt.touchRipple}`]:o.touchRipple},o.root,o[r.orientation]]}})({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box",[`& .${pt.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"},variants:[{props:{orientation:"vertical"},style:{justifyContent:"flex-start",padding:"8px",margin:"-8px"}}]}),Zt=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStepButton"}),{children:s,className:l,icon:m,optional:u,...c}=a,{disabled:h,active:v}=p.useContext(Z),{orientation:i}=p.useContext(J),f={...a,orientation:i},S=Qt(f),L={icon:m,optional:u},C=Pt(s,["StepLabel"])?p.cloneElement(s,L):e.jsx(bt,{...L,children:s});return e.jsx(Xt,{focusRipple:!0,disabled:h,TouchRippleProps:{className:S.touchRipple},className:F(S.root,l),ref:r,ownerState:f,"aria-current":v?"step":void 0,...c,children:C})});function te(t){return A("MuiStepConnector",t)}_("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const ee=t=>{const{classes:o,orientation:r,alternativeLabel:a,active:s,completed:l,disabled:m}=t,u={root:["root",r,a&&"alternativeLabel",s&&"active",l&&"completed",m&&"disabled"],line:["line",`line${ft(r)}`]};return H(u,te,o)},oe=$("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,o[r.orientation],r.alternativeLabel&&o.alternativeLabel,r.completed&&o.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),re=$("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.line,o[`line${ft(r.orientation)}`]]}})(q(({theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return{display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:o,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),ne=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStepConnector"}),{className:s,...l}=a,{alternativeLabel:m,orientation:u="horizontal"}=p.useContext(J),{active:c,disabled:h,completed:v}=p.useContext(Z),i={...a,alternativeLabel:m,orientation:u,active:c,completed:v,disabled:h},f=ee(i);return e.jsx(oe,{className:F(f.root,s),ref:r,ownerState:i,...l,children:e.jsx(re,{className:f.line,ownerState:i})})});function ae(t){return A("MuiStepper",t)}_("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const se=t=>{const{orientation:o,nonLinear:r,alternativeLabel:a,classes:s}=t;return H({root:["root",o,r&&"nonLinear",a&&"alternativeLabel"]},ae,s)},ie=$("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,o[r.orientation],r.alternativeLabel&&o.alternativeLabel,r.nonLinear&&o.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),le=e.jsx(ne,{}),pe=p.forwardRef(function(o,r){const a=V({props:o,name:"MuiStepper"}),{activeStep:s=0,alternativeLabel:l=!1,children:m,className:u,component:c="div",connector:h=le,nonLinear:v=!1,orientation:i="horizontal",...f}=a,S={...a,nonLinear:v,alternativeLabel:l,orientation:i,component:c},L=se(S),C=p.Children.toArray(m).filter(Boolean),P=C.map((R,j)=>p.cloneElement(R,{index:j,last:j+1===C.length,...R.props})),y=p.useMemo(()=>({activeStep:s,alternativeLabel:l,connector:h,nonLinear:v,orientation:i}),[s,l,h,v,i]);return e.jsx(J.Provider,{value:y,children:e.jsx(ie,{as:c,ownerState:S,className:F(L.root,u),ref:r,...f,children:P})})}),ce=t=>A("MuiImportIcon",t),gt={root:["root"]};_("MuiImportIcon",Object.keys(gt));const rt=p.forwardRef(function(o,r){const a=wt({props:o,name:"MuiImportIcon"}),{className:s,...l}=a,m=H(gt,ce,(()=>{if(s)return{root:s}})());return e.jsxs(xt,{ref:r,...l,className:F(m.root),viewBox:"0 0 1024 1024",children:[e.jsx("path",{d:"M733.397 928.471l114.925-145.925H733.397v145.925z m6 0"}),e.jsx("path",{d:"M781.211 98.623H196.236c-37.245 0-67.46 30.154-67.539 67.399v695.05c0.078 37.245 30.294 67.399 67.539 67.399h472.216V738.065a22.455 22.455 0 0 1 6.581-15.882 22.458 22.458 0 0 1 15.882-6.581h157.406v-549.58c-0.078-37.079-30.03-67.163-67.11-67.399zM227.387 639.965h122.332c20.48 0 34.133 13.656 34.133 34.133 0 20.48-13.653 34.137-34.133 34.137H227.387c-20.481 0-34.133-13.657-34.133-34.137 0-20.477 13.652-34.133 34.133-34.133z m250.332 191.756H227.387c-20.481 0-34.133-13.657-34.133-34.137 0-20.477 13.652-34.133 34.133-34.133h250.332c20.48 0 34.133 13.656 34.133 34.133 0 20.48-13.653 34.137-34.133 34.137z m3.71-255.821L324.167 401.614h102.399s21.175-158.734 140.64-199.695c17.067-6.825 37.547-10.239 58.028-10.239-37.547 17.067-61.442 58.028-71.68 81.918-7.557 16.422-15.723 25.614-15.723 128.016h102.403L481.429 575.9z"})]})});rt.__docgenInfo={description:"",methods:[],displayName:"ImportIcon",composes:["SvgIconProps"]};const ct=["Upload a file","Preview data","Map data","Import"],de=["csv"],me=({recordLabelPlural:t,recordLabelSingular:o,importFields:r,recordsImporter:a,importSuccessMessage:s})=>{t||(t="Records"),o||(o=t.replace(/s$/gi,""));const l=t.toLowerCase(),m=o.toLowerCase(),u=p.useRef(null),{palette:c}=$t(),[h,v]=p.useState(!1),[i,f]=p.useState("Upload a file"),[S,L]=p.useState([]),[C,P]=p.useState([]),[y,R]=p.useState({}),[j,M]=p.useState([]),w=(()=>{const n={},d=[];for(const b in y){const g=y[b];n[g]?n[g].push(b):n[g]=[b]}for(const b in n){const g=n[b];g.length>1&&d.push(...g)}return d})(),[k,I]=p.useState(!1);p.useEffect(()=>{if(i==="Upload a file"&&h){const n=x=>{x.preventDefault(),I(!0)},d=x=>{x.preventDefault(),I(!1)},b=["drag","dragstart","dragenter","dragover"];b.forEach(x=>{document.addEventListener(x,n)});const g=["dragend","dragleave","drop"];return g.forEach(x=>{document.addEventListener(x,d)}),()=>{b.forEach(x=>{document.removeEventListener(x,n)}),g.forEach(x=>{document.removeEventListener(x,d)})}}},[i,h]);const{mutate:E,mutating:N,mutated:U,errorMessage:W,reset:K}=jt(()=>{const n=S.map(d=>{const b={};for(const g in y){const x=y[g];b[x]=d[g]}return b});return a(n)}),O=(()=>{if(W)return W;if(w.length>0)return"Multiple file fields cannot be mapped to the same attribute."})(),St=()=>{v(!1),f("Upload a file"),L([]),P([]),R({}),M([]),K()},nt=n=>{if(n.name&&de.includes(n.name.split(".").pop())){const d=new FileReader;d.onload=b=>{var x;const g=(x=b.target)==null?void 0:x.result;if(g){const B=yt.parseCSV(g);B.length>0&&(f("Preview data"),M([...j,"Upload a file"]),L(B.map((Q,Ct)=>({...Q,id:Ct}))),P(Object.keys(B[0]).map(Q=>({id:Q,label:Q}))))}},d.onerror=function(b){console.error(b)},d.readAsText(n)}};return{label:`Import ${t}`,icon:e.jsx(rt,{}),type:"button",onClick:()=>{v(!0)},popupElement:e.jsx(Lt,{title:i==="Import"&&!N&&!U?`Confirm ${t} Importation`:`Import ${t}`,open:h,onClose:St,errorMessage:O,CardProps:{sx:{maxHeight:"none",...(()=>{switch(i){case"Preview data":case"Map data":return{maxWidth:960,height:"80%"}}})()}},CardBodyProps:{sx:{p:0,position:"relative",display:"flex",flexDirection:"column"}},CloseActionButtonProps:{children:i==="Upload a file"||U?"Close":"Cancel"},...(()=>{if(!N&&!U)switch(i){case"Preview data":return{actionButtons:[e.jsx(Y,{variant:"contained",onClick:()=>{f("Map data"),M([...j,"Preview data"])},children:"Confirm your file"},0)]};case"Map data":if(Object.keys(y).length>0&&!O)return{actionButtons:[e.jsx(Y,{variant:"contained",onClick:()=>{f("Import"),M([...j,"Map data"])},children:"Confirm mapping"},0)]};break;case"Import":if(!O)return{actionButtons:[e.jsxs(Y,{variant:"contained",onClick:()=>{E()},children:["Import ",t]},0)]}}})(),...(()=>{const n=Object.keys(y).length;if(i==="Map data"&&n>0){const d=C.length-n;return{popupStatsElement:e.jsxs(T,{variant:"body2",noWrap:!0,children:[e.jsxs("strong",{children:[n," column",n===1?"":"s"]})," ","to be imported. Ignored ",d," column",d===1?"":"s"]})}}})(),showActionsToolbar:!N,sx:{alignItems:"center",justifyContent:"center"},children:N||U?e.jsx(Rt,{load:E,loading:N,isLoaded:U,isLoadingMessage:`Importing ${l}...`,isLoadedMessage:s||`${t} imported successfully!`,Icon:rt,errorMessage:O,recordLabelPlural:t,recordLabelSingular:o}):e.jsxs(e.Fragment,{children:[e.jsx(X,{sx:{px:3,py:2},children:e.jsx(pe,{activeStep:ct.indexOf(i),alternativeLabel:!0,children:ct.map(n=>e.jsx(Dt,{completed:j.includes(n),children:e.jsx(Zt,{onClick:()=>{f(n)},children:n})},n))})}),e.jsx(Et,{}),e.jsx(X,{sx:{position:"relative",flex:1,minHeight:0,overflowY:"auto",...(()=>{switch(i){case"Upload a file":case"Import":return{p:3};case"Map data":return{px:3,pb:3}}})()},children:(()=>{switch(i){case"Upload a file":return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:u,type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{display:"none"},onChange:()=>{var d,b;const n=(b=(d=u.current)==null?void 0:d.files)==null?void 0:b[0];n&&nt(n)}}),e.jsx(X,{onClick:()=>{var n;(n=u.current)==null||n.click()},onDrop:n=>{n.preventDefault(),I(!1);const d=n.dataTransfer.files[0];d&&nt(d)},sx:{border:`2px dashed ${c.divider}`,borderRadius:"4px",cursor:"pointer",opacity:.5,"&:hover":{opacity:1},...(()=>{if(k)return{opacity:1,border:`2px dashed ${c.primary.main}`,bgcolor:tt(c.primary.main,.1)}})()},children:e.jsxs(it,{sx:{gap:1,alignItems:"center",justifyContent:"center",minHeight:"300px"},children:[e.jsx(It,{sx:{fontSize:80}}),k?e.jsx(T,{variant:"body1",sx:{fontWeight:"bold"},children:"Drop the file here"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"body1",sx:{fontWeight:"bold"},children:"Select your file or drag and drop it here"}),e.jsx(T,{variant:"body2",children:".csv, .xlsx or .txt"})]})]})})]});case"Preview data":{const d=S.slice(0,100);return e.jsx(Mt,{title:d.length<S.length?`Preview first ${at.addThousandCommas(100)} ${d.length===1?m:l} of your file`:`${t} in your file`,recordLabelPlural:t,recordLabelSingular:o,data:d,views:[{type:"List",columns:C}],elevation:0})}case"Map data":return e.jsxs(e.Fragment,{children:[e.jsxs(z,{container:!0,sx:{p:3,position:"sticky",top:0,bgcolor:c.background.paper,borderBottom:`1px solid ${c.divider}`,zIndex:5},children:[e.jsx(z,{item:!0,sx:{width:220},children:e.jsx(T,{variant:"body2",noWrap:!0,children:"File Field Header"})}),e.jsx(z,{item:!0,xs:!0,sx:{minWidth:0},children:e.jsx(T,{variant:"body2",noWrap:!0,children:"Data"})}),e.jsx(z,{item:!0,sx:{width:250},children:e.jsxs(T,{variant:"body2",noWrap:!0,children:[o," Attribute"]})})]}),e.jsx(it,{sx:{gap:2},children:C.map(({id:n,label:d},b)=>{const g=!!y[String(n)];return e.jsx(X,{sx:{p:3,bgcolor:tt(c.primary.main,.05),borderRadius:"4px",border:`1px solid ${g?tt(c.primary.main,.7):c.divider}`},children:e.jsxs(z,{container:!0,children:[e.jsx(z,{item:!0,sx:{width:220},children:e.jsx(T,{variant:"body2",noWrap:!0,children:d})}),e.jsx(z,{item:!0,xs:!0,sx:{minWidth:0},children:S.slice(0,3).map((x,B)=>e.jsx(T,{variant:"body2",noWrap:!0,children:x[n]},B))}),e.jsx(z,{item:!0,sx:{width:250},children:e.jsx(Nt,{options:[{label:"Do not import",value:"do_not_import"},...r],value:y[String(n)]||"do_not_import",onChange:x=>{!x.target.value||x.target.value==="do_not_import"?R(B=>vt(B,n)):R(B=>({...B,[n]:x.target.value}))},fullWidth:!0,InputProps:{sx:{bgcolor:c.background.paper}},showClearButton:!1,error:w.includes(String(n))})})]})},b)})})]});case"Import":return e.jsxs(T,{align:"center",children:[at.addThousandCommas(S.length)," ",S.length===1?m:l," ","will be imported"]})}})()})]})})}},Qo={title:"Hooks/Tools/Import Tool",component:Y,parameters:{layout:"centered"}},ue=({...t})=>{const{label:o,icon:r,popupElement:a,...s}=me({importFields:[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"phoneNumber",label:"Phone Number"}],recordsImporter:async l=>(console.log({records:l}),new Promise(m=>{setTimeout(()=>{m(l)},5e3)})),...t});return e.jsxs(e.Fragment,{children:[e.jsx(Y,{startIcon:r,...vt(s,"title","type"),children:o}),a]})},G=ue.bind({});G.args={recordLabelPlural:"Contacts"};var dt,mt,ut;G.parameters={...G.parameters,docs:{...(dt=G.parameters)==null?void 0:dt.docs,source:{originalSource:`({
  ...rest
}) => {
  const {
    label,
    icon,
    popupElement,
    ...toolPropsRest
  } = useImportTool({
    importFields: [{
      value: 'firstName',
      label: 'First Name'
    }, {
      value: 'lastName',
      label: 'Last Name'
    }, {
      value: 'phoneNumber',
      label: 'Phone Number'
    }],
    recordsImporter: async records => {
      console.log({
        records
      });
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(records);
        }, 5000);
      });
    },
    ...rest
  });
  return <>
      <Button startIcon={icon} {...omit(toolPropsRest, 'title', 'type')}>
        {label}
      </Button>
      {popupElement}
    </>;
}`,...(ut=(mt=G.parameters)==null?void 0:mt.docs)==null?void 0:ut.source}}};const Xo=["Default"];export{G as Default,Xo as __namedExportsOrder,Qo as default};
