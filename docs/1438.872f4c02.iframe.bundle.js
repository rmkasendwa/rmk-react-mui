(self.webpackChunk_infinite_debugger_react_mui=self.webpackChunk_infinite_debugger_react_mui||[]).push([[1438],{"./node_modules/@infinite-debugger/rmk-utils/Cypher.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encrypt=exports.decrypt=void 0;var crypto_js_1=__webpack_require__("./node_modules/crypto-js/index.js"),Hex=crypto_js_1.enc.Hex,Utf8=crypto_js_1.enc.Utf8,Pkcs7=crypto_js_1.pad.Pkcs7,CBC=crypto_js_1.mode.CBC,WordArray=crypto_js_1.lib.WordArray;exports.decrypt=function(transitmessage,password){transitmessage=transitmessage.replace(/@xZ/gm,"/");var salt=Hex.parse(transitmessage.substr(0,32)),iv=Hex.parse(transitmessage.substr(32,32)),key=(0,crypto_js_1.PBKDF2)(password,salt,{keySize:8,iterations:100}),decrypted=crypto_js_1.AES.decrypt(transitmessage.substring(64),key,{iv:iv,padding:Pkcs7,mode:CBC});try{return decrypted.toString(Utf8)}catch(exception){return transitmessage}};exports.encrypt=function(message,password,random){void 0===random&&(random=!0);var encrypted=function(){if(!1===random){var salt_1=(0,crypto_js_1.MD5)(password),key_1=(0,crypto_js_1.PBKDF2)(password,salt_1,{keySize:8,iterations:100}),iv_1=(0,crypto_js_1.MD5)(message);return salt_1.toString()+iv_1.toString()+crypto_js_1.AES.encrypt(message,key_1,{iv:iv_1,padding:Pkcs7,mode:CBC}).toString()}var salt=WordArray.random(16),key=(0,crypto_js_1.PBKDF2)(password,salt,{keySize:8,iterations:100}),iv=WordArray.random(16);return salt.toString()+iv.toString()+crypto_js_1.AES.encrypt(message,key,{iv:iv,padding:Pkcs7,mode:CBC}).toString()}();try{return(0,exports.decrypt)(encrypted,password)===message?encrypted.replace(/\//gm,"@xZ"):(0,exports.encrypt)(message,password)}catch(exception){return(0,exports.encrypt)(message,password)}}},"./node_modules/@infinite-debugger/rmk-utils/StorageManager.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__("./node_modules/process/browser.js");var crypto_js_1=__webpack_require__("./node_modules/crypto-js/index.js"),Cypher_1=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/Cypher.js"),Base64=crypto_js_1.enc.Base64,ENCRYPTION_KEY=process.env.ENCRYPTION_KEY||process.env.APP_NAME||process.env.REACT_APP_NAME||function(){if("undefined"!=typeof window)return window.location.origin}()||"A really trivial key",getEncryptedKey=function(key){return Base64.stringify((0,crypto_js_1.HmacSHA512)(key,ENCRYPTION_KEY)).substring(0,key.length)},StorageManager={add:function(key,value,options){var dataType,_this=this;if("undefined"!=typeof window){var isSessionValue_1="object"==typeof options?options.isSessionValue:options;"object"==typeof value&&(value=JSON.stringify(value)),value="bigint"===(dataType=typeof value)||"number"===dataType||"boolean"===dataType?"".concat(value,";;;").concat(dataType):value,value=(0,Cypher_1.encrypt)(value,key),(isSessionValue_1?sessionStorage:localStorage).setItem(getEncryptedKey(key),btoa(value)),"object"==typeof options&&options.expiry&&setTimeout((function(){return _this.remove(key,isSessionValue_1)}),options.expiry)}},get:function(key,isSessionValue){if(void 0===isSessionValue&&(isSessionValue=!1),"undefined"!=typeof window){var item_1=(isSessionValue?sessionStorage:localStorage).getItem(getEncryptedKey(key));if(item_1){item_1=(item_1=(0,Cypher_1.decrypt)(atob(item_1),key)).match(";;;")?item_1.split(";;;")[0]:item_1;try{return JSON.parse(item_1)}catch(err){return item_1}}}return null},remove:function(key,isSessionValue){void 0===isSessionValue&&(isSessionValue=!1),"undefined"!=typeof window&&(isSessionValue?sessionStorage:localStorage).removeItem(getEncryptedKey(key))},clear:function(session){void 0===session&&(session=!1);var storage=session?sessionStorage:localStorage;storage&&Object.keys(storage).forEach((function(key){storage.removeItem(key)}))}};exports.Z=StorageManager},"./node_modules/@infinite-debugger/rmk-utils/bytes.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatBytes=void 0;exports.formatBytes=function(bytes){var bytesAbs=Math.abs(bytes);return bytesAbs<1024?"".concat(bytes," bytes"):bytesAbs<1048576?"".concat((bytes/1024).toFixed(2)," KB"):bytesAbs<1073741824?"".concat((bytes/1048576).toFixed(2)," MB"):"".concat((bytes/1073741824).toFixed(2)," GB")}},"./node_modules/@infinite-debugger/rmk-utils/data.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";exports.bW=exports.Bl=exports.Hg=void 0;var lodash_1=__webpack_require__("./node_modules/lodash/lodash.js"),bytes_1=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/bytes.js");exports.Hg=function(updatedData,originalData,biDirectional){void 0===biDirectional&&(biDirectional=!1);var dataDiff=(0,lodash_1.omitBy)(updatedData,(function(value,key){if("object"==typeof(null==originalData?void 0:originalData[key])){var similar=(0,lodash_1.isEmpty)((0,exports.Hg)(updatedData[key],originalData[key]));return similar?(0,lodash_1.isEmpty)((0,exports.Hg)(originalData[key],updatedData[key])):similar}return(null==originalData?void 0:originalData[key])===value}));if(biDirectional){var mirrorDiff=(0,exports.Hg)(originalData,updatedData);for(var key in mirrorDiff)!(null==dataDiff?void 0:dataDiff[key])&&(null==mirrorDiff?void 0:mirrorDiff[key])&&(dataDiff[key]=mirrorDiff[key])}return dataDiff};exports.Bl=function(object,formatted){void 0===formatted&&(formatted=!1);var bytes=0;if(null!=object)switch(typeof object){case"number":bytes+=8;break;case"string":bytes+=2*object.length;break;case"boolean":bytes+=4;break;case"object":var objectClass=Object.prototype.toString.call(object).slice(8,-1);if("Object"===objectClass||"Array"===objectClass)for(var key in object)object.hasOwnProperty(key)&&(bytes+=(0,exports.Bl)(object[key]));else bytes+=2*object.toString().length}return formatted?(0,bytes_1.formatBytes)(bytes):bytes};exports.bW=function(csvData,delimiter){void 0===delimiter&&(delimiter=",");for(var lines=csvData.split("\n"),headers=lines[0].split(delimiter),rows=[],i=1;i<lines.length;i++){var line=lines[i].trim();if(""!==line){for(var values=[],currentField="",insideQuotes=!1,j=0;j<line.length;j++){var char=line[j];'"'===char?insideQuotes=!insideQuotes:char!==delimiter||insideQuotes?currentField+=char:(values.push(currentField.trim()),currentField="")}values.push(currentField.trim());var row={};for(j=0;j<headers.length;j++){var header=headers[j].trim(),value=values[j]?values[j].trim():"";row[header]=value}rows.push(row)}}return rows}},"./node_modules/@mui/material/esm/Container/Container.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _mui_system__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mui/system/esm/Container/createContainer.js"),_utils_capitalize__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/material/esm/utils/capitalize.js"),_styles_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/esm/styles/styled.js"),_styles_useThemeProps__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/esm/styles/useThemeProps.js");const Container=(0,_mui_system__WEBPACK_IMPORTED_MODULE_0__.Z)({createStyledComponent:(0,_styles_styled__WEBPACK_IMPORTED_MODULE_1__.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(props,styles)=>{const{ownerState:ownerState}=props;return[styles.root,styles[`maxWidth${(0,_utils_capitalize__WEBPACK_IMPORTED_MODULE_2__.Z)(String(ownerState.maxWidth))}`],ownerState.fixed&&styles.fixed,ownerState.disableGutters&&styles.disableGutters]}}),useThemeProps:inProps=>(0,_styles_useThemeProps__WEBPACK_IMPORTED_MODULE_3__.Z)({props:inProps,name:"MuiContainer"})});__webpack_exports__.Z=Container},"./src/components/ErrorPages/ErrorPage.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{ZP:function(){return ErrorPages_ErrorPage}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),generateUtilityClass_generateUtilityClass=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClass/generateUtilityClass.js"),generateUtilityClasses=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClasses/generateUtilityClasses.js"),useThemeProps=__webpack_require__("./node_modules/@mui/material/esm/styles/useThemeProps.js"),composeClasses=__webpack_require__("./node_modules/@mui/utils/esm/composeClasses/composeClasses.js"),useTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/useTheme.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Container=__webpack_require__("./node_modules/@mui/material/esm/Container/Container.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),colorManipulator=__webpack_require__("./node_modules/@mui/system/esm/colorManipulator.js"),Grid=__webpack_require__("./node_modules/@mui/material/esm/Grid/Grid.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),AuthContext=__webpack_require__("./src/contexts/AuthContext.tsx"),rmk_utils_StorageManager=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/StorageManager.js");function getHtmlHeadUtilityClass(slot){return generateUtilityClass("MuiHtmlHead",slot)}(0,generateUtilityClasses.Z)("MuiHtmlHead",["root"]);var HtmlHead=function HtmlHead(inProps){var props=(0,useThemeProps.Z)({props:inProps,name:"MuiHtmlHead"}),title=props.title,description=props.description,_props$showApplicatio=props.showApplicationName,showApplicationName=void 0!==_props$showApplicatio&&_props$showApplicatio,_props$applicationNam=props.applicationName,applicationName=void 0===_props$applicationNam?"Application":_props$applicationNam;return(0,react.useEffect)((function(){if(title){var history=rmk_utils_StorageManager.Z.get("page-history")||[];history.unshift({title:title,pathName:window.location.pathname,search:window.location.search}),history.splice(500),rmk_utils_StorageManager.Z.add("page-history",history);var titleElement=document.head.querySelector("title");null!=titleElement&&(titleElement.innerText=showApplicationName?"".concat(title," | ").concat(applicationName):title)}else{var _titleElement=document.head.querySelector("title");null!=_titleElement&&applicationName&&(_titleElement.innerText=applicationName)}}),[applicationName,showApplicationName,title]),(0,react.useEffect)((function(){if(description){var descriptionMetaElement=document.head.querySelector('meta[name="description"]');descriptionMetaElement||((descriptionMetaElement=document.createElement("meta")).setAttribute("name","description"),document.head.append(descriptionMetaElement)),descriptionMetaElement.setAttribute("content",description)}}),[description]),null},components_HtmlHead=HtmlHead;try{getHtmlHeadUtilityClass.displayName="getHtmlHeadUtilityClass",getHtmlHeadUtilityClass.__docgenInfo={description:"",displayName:"getHtmlHeadUtilityClass",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/HtmlHead.tsx#getHtmlHeadUtilityClass"]={docgenInfo:getHtmlHeadUtilityClass.__docgenInfo,name:"getHtmlHeadUtilityClass",path:"src/components/HtmlHead.tsx#getHtmlHeadUtilityClass"})}catch(__react_docgen_typescript_loader_error){}try{HtmlHead.displayName="HtmlHead",HtmlHead.__docgenInfo={description:"",displayName:"HtmlHead",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},applicationName:{defaultValue:null,description:"",name:"applicationName",required:!1,type:{name:"string"}},showApplicationName:{defaultValue:null,description:"",name:"showApplicationName",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/HtmlHead.tsx#HtmlHead"]={docgenInfo:HtmlHead.__docgenInfo,name:"HtmlHead",path:"src/components/HtmlHead.tsx#HtmlHead"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["className","showDefaultPageLinks","title","heading","description","errorCode","tools"],getErrorPageUtilityClass=function getErrorPageUtilityClass(slot){return(0,generateUtilityClass_generateUtilityClass.Z)("MuiErrorPage",slot)},slots={root:["root"]},ErrorPage=((0,generateUtilityClasses.Z)("MuiErrorPage",Object.keys(slots)),(0,react.forwardRef)((function ErrorPage(inProps,ref){var props=(0,useThemeProps.Z)({props:inProps,name:"MuiErrorPage"}),className=props.className,_props$showDefaultPag=props.showDefaultPageLinks,showDefaultPageLinks=void 0===_props$showDefaultPag||_props$showDefaultPag,title=props.title,heading=props.heading,description=props.description,errorCode=props.errorCode,tools=props.tools,rest=(0,objectWithoutProperties.Z)(props,_excluded),classes=(0,composeClasses.Z)(slots,getErrorPageUtilityClass,function(){if(className)return{root:className}}()),palette=(0,useTheme.Z)().palette,navigate=(0,dist.s0)(),authenticated=(0,AuthContext.aC)().authenticated;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(components_HtmlHead,{title:title}),(0,jsx_runtime.jsx)(Box.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({ref:ref},rest),{},{className:(0,clsx_m.Z)(classes.root),sx:{position:"absolute",width:"100%",minHeight:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",textAlign:"center"},children:(0,jsx_runtime.jsxs)(Container.Z,{maxWidth:"sm",sx:{py:5,px:3},children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"h2",mb:2,children:heading}),description?(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",children:description}):null,(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",sx:{color:(0,colorManipulator.Fq)(palette.text.primary,.75)},children:"That’s all we know."}),(0,jsx_runtime.jsx)(Box.Z,{sx:{my:3,color:palette.error.main},children:function(){if(errorCode)return["string","number"].includes(typeof errorCode)?(0,jsx_runtime.jsx)(Typography.Z,{sx:{fontSize:120,fontWeight:"bold"},children:errorCode}):errorCode}()}),showDefaultPageLinks?(0,jsx_runtime.jsx)(Grid.ZP,{container:!0,spacing:3,sx:{maxWidth:600,justifyContent:"center"},children:tools?react.Children.toArray(tools).map((function(tool,index){return(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sx:{minWidth:0},children:tool},index)})):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sm:6,xs:12,children:(0,jsx_runtime.jsx)(Button.Z,{onClick:function onClick(){return navigate(-1)},color:"primary",fullWidth:!0,size:"large",children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:"Go back to the previous page"})})}),authenticated?(0,jsx_runtime.jsx)(Grid.ZP,{item:!0,sm:6,xs:12,children:(0,jsx_runtime.jsx)(Button.Z,{component:react_router_dom_dist.rU,to:"/",color:"inherit",fullWidth:!0,size:"large",children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",noWrap:!0,children:"Go to home page"})})}):null]})}):null]})}))]})}))),ErrorPages_ErrorPage=ErrorPage;try{getErrorPageUtilityClass.displayName="getErrorPageUtilityClass",getErrorPageUtilityClass.__docgenInfo={description:"",displayName:"getErrorPageUtilityClass",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ErrorPages/ErrorPage.tsx#getErrorPageUtilityClass"]={docgenInfo:getErrorPageUtilityClass.__docgenInfo,name:"getErrorPageUtilityClass",path:"src/components/ErrorPages/ErrorPage.tsx#getErrorPageUtilityClass"})}catch(__react_docgen_typescript_loader_error){}try{ErrorPage.displayName="ErrorPage",ErrorPage.__docgenInfo={description:"",displayName:"ErrorPage",props:{showDefaultPageLinks:{defaultValue:null,description:"",name:"showDefaultPageLinks",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},heading:{defaultValue:null,description:"",name:"heading",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},errorCode:{defaultValue:null,description:"",name:"errorCode",required:!1,type:{name:"ReactNode"}},tools:{defaultValue:null,description:"",name:"tools",required:!1,type:{name:"ReactNode | ReactNode[]"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ErrorPages/ErrorPage.tsx#ErrorPage"]={docgenInfo:ErrorPage.__docgenInfo,name:"ErrorPage",path:"src/components/ErrorPages/ErrorPage.tsx#ErrorPage"})}catch(__react_docgen_typescript_loader_error){}},"./src/contexts/AuthContext.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{aC:function(){return useAuth}});var rmk_utils_StorageManager=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/StorageManager.js"),react=__webpack_require__("./node_modules/react/index.js"),defineProperty=(__webpack_require__("./src/hooks/Utils.ts"),__webpack_require__("./src/contexts/APIContext.tsx"),__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js")),rmk_utils_data=__webpack_require__("./node_modules/@infinite-debugger/rmk-utils/data.js"),dataKeys=(__webpack_require__("./node_modules/react/jsx-runtime.js"),rmk_utils_StorageManager.Z.get("".concat("cached-data","-keys"))||[]),baseData=rmk_utils_StorageManager.Z.get("data")||{};dataKeys.forEach((function(key){var keyData=rmk_utils_StorageManager.Z.get("".concat("cached-data","-").concat(key));keyData&&Object.assign(baseData,(0,defineProperty.Z)({},key,keyData))}));var updateData=function updateData(data){if(Object.assign(baseData,data),data&&(0,rmk_utils_data.Bl)(data)<=15360){if(Object.keys(data).forEach((function(key){rmk_utils_StorageManager.Z.add("".concat("cached-data","-").concat(key),data[key]),dataKeys.includes(key)&&dataKeys.splice(dataKeys.indexOf(key),1),dataKeys.push(key)})),dataKeys.length>35)dataKeys.splice(0,dataKeys.length-35).forEach((function(key){rmk_utils_StorageManager.Z.remove("".concat("cached-data","-").concat(key))}));rmk_utils_StorageManager.Z.add("".concat("cached-data","-keys"),dataKeys)}return baseData},DataStoreContext_reset=function reset(){dataKeys.forEach((function(key){rmk_utils_StorageManager.Z.remove("".concat("cached-data","-").concat(key))})),rmk_utils_StorageManager.Z.remove("".concat("cached-data","-keys")),dataKeys.splice(0),Object.keys(baseData).forEach((function(key){delete baseData[key]}))},DataStoreContext=(0,react.createContext)({data:baseData,updateData:updateData,reset:DataStoreContext_reset}),DataStoreProvider=function DataStoreProvider(_ref){var children=_ref.children,_useState=useState(baseData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1],updateLocalData=useCallback((function(data){setData(_objectSpread({},updateData(data)))}),[]),localReset=useCallback((function(){DataStoreContext_reset(),setData(_objectSpread({},baseData))}),[]);return _jsx(DataStoreContext.Provider,{value:{data:data,updateData:updateLocalData,reset:localReset},children:children})};try{DataStoreProvider.displayName="DataStoreProvider",DataStoreProvider.__docgenInfo={description:"",displayName:"DataStoreProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/DataStoreContext.tsx#DataStoreProvider"]={docgenInfo:DataStoreProvider.__docgenInfo,name:"DataStoreProvider",path:"src/contexts/DataStoreContext.tsx#DataStoreProvider"})}catch(__react_docgen_typescript_loader_error){}var AuthContext=(0,react.createContext)({}),AuthProvider=function AuthProvider(_ref){var children=_ref.children,value=_ref.value,_useState=useState(null),_useState2=_slicedToArray(_useState,2),loggedInUser=_useState2[0],setLoggedInUser=_useState2[1],_useState3=useState(!0),_useState4=_slicedToArray(_useState3,2),loadingCurrentSession=_useState4[0],setLoadingCurrentSession=_useState4[1],setSessionExpired=useAPIContext().setSessionExpired,resetCachedData=useCachedData().reset,_useAPIService=useAPIService(loggedInUser),user=_useAPIService.record,load=_useAPIService.load,loggingIn=_useAPIService.loading,loginErrorMessage=_useAPIService.errorMessage;useEffect((function(){var focusCallback=function(){var _ref2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:setLoggedInUser(StorageManager.get("user")),setLoadingCurrentSession(!1);case 2:case"end":return _context.stop()}}),_callee)})));return function focusCallback(){return _ref2.apply(this,arguments)}}();return window.addEventListener("focus",focusCallback),focusCallback(),function(){window.removeEventListener("focus",focusCallback)}}),[]);var updateLoggedInUserSession=useCallback((function(user){setSessionExpired(!1),StorageManager.add("user",user),setLoggedInUser(user)}),[setSessionExpired]),clearLoggedInUserSession=useCallback((function(){StorageManager.remove("user")}),[]),login=useCallback(function(){var _ref3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(loginFunction){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:clearLoggedInUserSession(),load(loginFunction);case 2:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref3.apply(this,arguments)}}(),[clearLoggedInUserSession,load]),logoutRef=useRef(function(){var _ref4=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(logout){return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(clearLoggedInUserSession(),_context3.t0=logout,!_context3.t0){_context3.next=5;break}return _context3.next=5,logout();case 5:return _context3.next=7,resetCachedData();case 7:setLoggedInUser(null);case 8:case"end":return _context3.stop()}}),_callee3)})));return function(_x2){return _ref4.apply(this,arguments)}}()),updateLoggedInUser=useCallback((function(user){updateLoggedInUserSession(user)}),[updateLoggedInUserSession]),loggedInUserPermissions=useCallback((function(){return loggedInUser&&loggedInUser.permissions?loggedInUser.permissions:[]}),[loggedInUser]),loggedInUserHasPermission=useCallback((function(permissionCode){var permissions=loggedInUserPermissions(),isSuperAdmin=permissions.includes("ALL_FUNCTIONS");return isSuperAdmin||(Array.isArray(permissionCode)?permissionCode.some((function(permission){return permissions.includes(permission)})):permissions.includes(permissionCode))}),[loggedInUserPermissions]);return useEffect((function(){user&&updateLoggedInUserSession(user)}),[user,updateLoggedInUserSession]),_jsx(AuthContext.Provider,{value:_objectSpread({loggedInUser:loggedInUser,login:login,logout:logoutRef.current,updateLoggedInUser:updateLoggedInUser,clearLoggedInUserSession:clearLoggedInUserSession,authenticated:null!==loggedInUser,loggedInUserHasPermission:loggedInUserHasPermission,loadingCurrentSession:loadingCurrentSession,loggingIn:loggingIn,loginErrorMessage:loginErrorMessage},value),children:children})},useAuth=function useAuth(){return(0,react.useContext)(AuthContext)};try{AuthProvider.displayName="AuthProvider",AuthProvider.__docgenInfo={description:"",displayName:"AuthProvider",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Record<string, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/AuthContext.tsx#AuthProvider"]={docgenInfo:AuthProvider.__docgenInfo,name:"AuthProvider",path:"src/contexts/AuthContext.tsx#AuthProvider"})}catch(__react_docgen_typescript_loader_error){}},"?9157":function(){}}]);